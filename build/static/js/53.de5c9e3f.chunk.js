(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[53],{1674:function(e,t,n){"use strict";n.r(t);var a=n(11),c=n(16),i=n(4),r=n(17),s=n(2),o=n.n(s),l=n(1),d=n(6),u=n(512),p=n.n(u),j=n(903),b=n(819),m=n(826),v=n(500),f=n(498),x=n(510),O=n(511),h=n(90),g=n(5),N=n.n(g),I=n(611),y=n(497),w=(n(514),n(502),n(499),n(503),n(513)),k=n(672),A=n(10),C=n(131),S=n(132),z=n(12),P=Object(w.b)(),F=Object(w.a)(),T=function(){var e=Object(l.useState)([]),t=Object(r.a)(e,2),n=t[0],s=t[1],u=Object(l.useState)([]),g=Object(r.a)(u,2),w=g[0],T=g[1],B=Object(l.useState)([]),V=Object(r.a)(B,2),L=V[0],_=V[1],R=Object(l.useState)([]),E=Object(r.a)(R,2),D=E[0],G=E[1],q=Object(l.useState)([]),J=Object(r.a)(q,2),H=J[0],M=J[1],W=Object(l.useState)(0),U=Object(r.a)(W,2),Y=U[0],Z=U[1],$=Object(l.useState)(0),K=Object(r.a)($,2),Q=K[0],X=K[1],ee=Object(l.useState)([]),te=Object(r.a)(ee,2),ne=te[0],ae=te[1],ce=Object(l.useState)({}),ie=Object(r.a)(ce,2),re=ie[0],se=ie[1],oe=Object(l.useState)([]),le=Object(r.a)(oe,2),de=le[0],ue=le[1],pe=Object(l.useState)([]),je=Object(r.a)(pe,2),be=je[0],me=je[1],ve=Object(l.useState)([]),fe=Object(r.a)(ve,2),xe=fe[0],Oe=fe[1],he=Object(l.useState)([]),ge=Object(r.a)(he,2),Ne=ge[0],Ie=ge[1],ye=Object(A.f)(),we=Object(S.b)(),ke=Object(S.c)((function(e){return e.invoice}));Object(l.useEffect)((function(){d.a.post("/clients/dropdown").then((function(e){var t=e.data;s(t.clients)})),d.a.post("/services/dropdown").then((function(e){var t=e.data;T(t.services)})),d.a.post("/taxgroups/dropdown").then((function(e){var t=e.data;_(t.taxgroups)})),d.a.post("/exemptionreasons/dropdown").then((function(e){var t=e.data;Ie(t.exemptionreasons)})),d.a.post("/transactionaccounts/dropdown").then((function(e){var t=e.data;M(t.transactionaccounts)})),d.a.post("/states/list").then((function(e){var t=e.data;G(t.states)}))}),[]);var Ae=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(Object(I.e)(t));case 2:n=e.sent,se(n.payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=x.f().shape({contactId:x.e().required("Please select a Client"),uniqueIdentity:x.h(),contactEmail:x.h(),contactName:x.h(),invoiceDate:x.e(),paymentDue:x.e(),placeOfSupplyId:x.e().required("Please select a Place Of Supply"),subTotalAmount:x.h(),totalAmount:x.h(),totalTaxAmount:x.h(),organizationId:x.e().default(P),isRcmApplicable:x.c().default(!1),dueAmount:x.h(),billingAddressLine1:x.h(),billingAddressLine2:x.h(),billingAddressState:x.h(),billingAddressCity:x.h(),billingAddressZipCode:x.h(),billingCurrencyId:x.e(),bankAccountBankName:x.h(),bankAccountBranchName:x.h(),bankAccountHolderName:x.h(),bankAccountId:x.h().required("Please Select Account"),bankAccountIfscCode:x.h(),bankAccountNumber:x.h(),organizationAddressLine1:x.h().default(F.addressline1),organizationAddressLine2:x.h().default(F.addressline2),organizationCity:x.h().default(F.organizationcity),organizationState:x.h().default(F.statename),organizationZipCode:x.h().default(F.pinzipcode),organizationName:x.h().default(F.name),organizationImageUrl:x.h().default(""),organizationStateCode:x.h().default(F.stateshortname),organizationGstin:x.h().default(F.gstin),gstin:x.h(),note:x.h().default("It was a pleasure working with you and your team. We hope you will keep us in mind for future freelance projects. Thank You!"),status:x.e().default(1),calculateTaxes:x.h(),paymentStatus:x.e().default(11),rows:x.a().of(x.f().shape({serviceId:x.e().required("Please Select Service Item"),invoiceId:x.e(),sacCode:x.h(),price:x.h(),organizationId:x.e().default(P),exemptionReasonId:x.e().nullable(),isTaxApplicable:x.c().default(!0),actualPrice:x.h().required(),taxGroupId:x.e().required("Pleace Select Tax"),subTotalAmount:x.h().required(1),taxes:x.h()}))}),Se=Object(f.f)({resolver:Object(O.a)(Ce),defaultValues:Ce.cast()}),ze=Se.handleSubmit,Pe=Se.formState.errors,Fe=Se.control,Te=Se.setValue,Be=Object(f.e)({control:Fe,name:"rows"}),Ve=Be.fields,Le=Be.append,_e=Be.remove,Re=Be.update,Ee=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rows,ae(n),delete t.rows,e.next=5,we(Object(I.a)(t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne.forEach((function(e,n){ne[n].invoiceId=t})),e.next=3,we(Object(I.b)(ne));case 3:ye("/invoice/view/".concat(ke.invoiceId));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(){Le({invoiceId:0,organizationId:P,serviceId:"",exemptionReasonId:0,isTaxApplicable:!0,sacCode:"",actualPrice:0,taxGroupId:"",subTotalAmount:0,taxPrice:0,description:""})};Object(l.useEffect)((function(){Ge()}),[]),Object(l.useEffect)(Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==ke.invoiceId&&ne.length>0)){e.next=3;break}return e.next=3,De(ke.invoiceId);case 3:case"end":return e.stop()}}),e)}))),[ke.invoiceId]);var qe=function(){var e=Fe._formValues.rows,t=0,n=0,a=0;e.forEach((function(e){t=parseFloat(e.subTotalAmount)+parseFloat(t),n=parseFloat(e.price)+parseFloat(n),a=parseFloat(a)+parseFloat(e.taxPrice)})),Fe._formValues.subTotalAmount=n,Fe._formValues.totalAmount=t,Fe._formValues.dueAmount=t,Fe._formValues.totalTaxAmount=a,Z(t),X(n),function(){var e;e=Fe._formValues.rows.map((function(e){return Object(k.b)(e.taxes)})).flat().reduce((function(e,t){if(void 0!==t){var n=e.find((function(e){return t.taxName===e.taxName}));n?n.taxAmount=parseFloat(n.taxAmount)+parseFloat(t.taxAmount):e.push(Object.assign({},t))}return e}),[]),Oe(e),Te("calculateTaxes",JSON.stringify(e))}()},Je=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],r=Fe._formValues.rows[e];if(void 0===r.serviceId||""===r.serviceId)return!1;var s=w.find((function(e){return e.id===r.serviceId}));i?(r.sacCode=s.saccode,r.actualPrice=0|s.sellingprice,r.price=0|String(s.sellingprice),r.taxGroupId=s.taxgroupid,r.description=s.description,r.exemptionReasonId=s.exemptionreasonid):(r.sacCode=a?r.sacCode:s.saccode,r.price=n?r.price:0|s.sellingprice,r.actualPrice=0|String(s.sellingprice),r.taxGroupId=c?r.taxGroupId:s.taxgroupid,r.description=t?r.description:s.description,r.exemptionReasonId=s.exemptionreasonid);var o=0,l=[],d=L.find((function(e){return e.id===r.taxGroupId}));r.isTaxApplicable=void 0!==d?!d.nontaxableflag:s.istaxapplicable,r.isTaxApplicable&&void 0!==d&&de.forEach((function(e){if(e.taxid===r.taxGroupId){var t;t=Object(k.a)(r.price,e.percentage,2),o=parseFloat(o)+parseFloat(t);var n={};n.taxName="".concat(e.name," (").concat(e.percentage,"%)"),n.taxId=parseInt(e.id),n.taxNameValue=e.name,n.taxPercentage=String(e.percentage),n.taxAmount=String(t),l.push(n)}})),r.subTotalAmount=String(parseFloat(parseFloat(0|o)+parseFloat(0|r.price)).toFixed(2)),r.taxPrice=parseFloat(o).toFixed(2),r.taxes=JSON.stringify(l),Re(e,r),qe()},He=function(){var e=1;F.stateid===Fe._formValues.placeOfSupplyId&&(e=2),function(e){var t={type:e};d.a.post("/taxvalues/list",t).then((function(e){var t=e.data;ue(t.taxvalues)}))}(e)};Object(l.useEffect)((function(){de.length>0&&Fe._formValues.rows.forEach((function(e,t){Je(t,!1,!1,!1,!1,!1)}))}),[de]);Object(l.useEffect)((function(){Object.keys(re).length>0&&(Te("billingAddressCity",re.billingaddresscity),Te("billingAddressLine1",re.billingaddressline1),Te("billingAddressLine2",re.billingaddressline1),Te("billingAddressState",re.billingaddressstatesname),Te("billingAddressZipCode",re.billingaddresszip),Te("billingCurrencyId",parseInt(re.currencyid)),Te("billingCurrencySymbol",re.currenciessymbol),Te("billingCurrencyShortName",re.currenciescode),Te("billingCurrencyName",re.currenciesname),Te("contactEmail",re.email),Te("gstin",re.gstin),Te("contactName",re.name),Te("placeOfSupplyId",re.placeofsupplyid),He())}),[re]);return Object(z.jsx)("form",{onSubmit:ze(Ee),children:Object(z.jsx)(h.jb,{className:"invoice-add",children:Object(z.jsxs)(l.Fragment,{children:[Object(z.jsx)(h.B,{xl:10,md:8,sm:12,children:Object(z.jsxs)(h.l,{className:"invoice-preview-card",children:[Object(z.jsxs)(h.m,{className:"invoice-padding pb-0",children:[function(){var e=Object.keys(Pe),t=[];return Array.isArray(e)&&e.forEach((function(e){var n;"rows"!==e&&t.push(Object(z.jsxs)(h.I,{children:["$",null===(n=Pe[e])||void 0===n?void 0:n.message]},e))})),t}(),Object(z.jsxs)("div",{className:"d-flex justify-content-between flex-md-row flex-column invoice-spacing mt-0",children:[Object(z.jsxs)("div",{children:[Object(z.jsx)("div",{className:"logo-wrapper",children:function(e){var t=["light-success","light-danger","light-warning","light-info","light-primary","light-secondary"][Math.floor(6*Math.random())];return Object(z.jsx)(y.a,{color:t,className:"me-50",content:null!==e?e.charAt(0):""})}(F.name)}),Object(z.jsx)("h3",{className:"text-primary invoice-logo",children:F.name}),Object(z.jsx)("p",{className:"card-text mb-25",children:F.addressline1}),Object(z.jsx)("p",{className:"card-text mb-25",children:F.addressline2}),Object(z.jsxs)("p",{className:"card-text mb-0",children:[F.organizationcity," - ",F.pinzipcode]}),Object(z.jsx)("p",{className:"card-text mb-0",children:F.statename})]}),Object(z.jsxs)("div",{className:"invoice-number-date mt-md-0 mt-2",children:[Object(z.jsxs)("div",{className:"d-flex align-items-center justify-content-md-end mb-1",children:[Object(z.jsx)("h4",{className:"invoice-title",children:"Invoice"}),Object(z.jsxs)(h.M,{className:"input-group-merge invoice-edit-input-group disabled",children:[Object(z.jsx)(h.N,{children:Object(z.jsx)(j.a,{size:15})}),Object(z.jsx)(h.L,{type:"number",className:"invoice-edit-input",value:3171,placeholder:"53634",disabled:!0})]})]}),Object(z.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[Object(z.jsx)("span",{className:"title",children:"Invoice Date:"}),Object(z.jsx)(f.a,{control:Fe,name:"invoiceDate",id:"invoiceDate",render:function(e){var t=e.field;return Object(z.jsx)(p.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0,altFormat:"M j, Y",dateFormat:"U"},className:"form-control invoice-edit-input date-picker"})}})]}),Object(z.jsxs)("div",{className:"d-flex align-items-center",children:[Object(z.jsx)("span",{className:"title",children:"Due Date:"}),Object(z.jsx)(f.a,{control:Fe,name:"paymentDue",id:"paymentDue",render:function(e){var t=e.field;return Object(z.jsx)(p.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0,altFormat:"M j, Y",dateFormat:"U"},className:"form-control invoice-edit-input due-date-picker"})}})]})]})]})]}),Object(z.jsx)("hr",{className:"invoice-spacing"}),Object(z.jsxs)(h.m,{className:"invoice-padding pt-0",children:[Object(z.jsxs)(h.jb,{className:"row-bill-to invoice-spacing",children:[Object(z.jsxs)(h.B,{className:"col-bill-to ps-0",xl:"8",children:[Object(z.jsx)("h6",{className:"invoice-to-title",children:"Invoice To:"}),Object(z.jsx)("div",{className:"invoice-customer",children:Object(z.jsx)(f.a,{control:Fe,name:"contactId",id:"contactId",render:function(e){var t=e.field,a=e.ref;return Object(z.jsx)(v.a,Object(c.a)(Object(c.a)({inputRef:a,className:N()("react-select",{"is-invalid":Pe.contactId})},t),{},{classNamePrefix:"select",options:n,value:n.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),Ae(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})}),Object(z.jsx)(h.B,{className:"pe-0 mt-xl-2",xl:"4",children:Object(z.jsx)("table",{children:Object(z.jsxs)("tbody",{children:[Object(z.jsx)("tr",{children:Object(z.jsx)("td",{children:re.billingaddressline1})}),Object(z.jsx)("tr",{children:Object(z.jsx)("td",{children:re.billingaddressline2})}),Object(z.jsx)("tr",{children:Object(z.jsxs)("td",{children:[re.billingaddresscity," ",re.billingaddresszip&&"-","  ",re.billingaddresszip]})}),Object(z.jsx)("tr",{children:Object(z.jsx)("td",{children:re.billingaddressstatesname})})]})})})]}),Object(z.jsxs)(h.B,{className:"pe-0 mt-xl-0 mt-2",xl:"4",children:[Object(z.jsx)("h6",{className:"mb-2",children:"Payment Details:"}),Object(z.jsx)("table",{children:Object(z.jsxs)("tbody",{children:[Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{className:"pe-1",children:"Bank Name:"}),Object(z.jsx)("td",{children:be.bankName&&Object(z.jsx)("span",{className:"fw-bolder",children:be.bankName})})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{className:"pe-1",children:"Account name:"}),Object(z.jsx)("td",{children:be.accountHolderName&&Object(z.jsx)("span",{className:"fw-bolder",children:be.accountHolderName})})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{className:"pe-1",children:"Branch Name:"}),Object(z.jsxs)("td",{children:[" ",be.branchAddress&&Object(z.jsx)("span",{className:"fw-bolder",children:be.branchAddress})]})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{className:"pe-1",children:"IFSC Code:"}),Object(z.jsx)("td",{children:be.ifscCode&&Object(z.jsxs)("span",{className:"fw-bolder",children:[be.ifscCode," "]})})]}),re.currenciescode&&Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{className:"pe-1",children:"Currency code:"}),Object(z.jsx)("td",{children:re.currenciescode})]})]})})]})]}),Object(z.jsxs)(h.jb,{className:"row-bill-to invoice-spacing",children:[Object(z.jsxs)(h.B,{className:"col-bill-to ps-0",xl:"8",children:[Object(z.jsx)("h6",{className:"invoice-to-title mt-2",children:"Place Of Supply:"}),Object(z.jsx)("div",{className:"invoice-customer",children:Object(z.jsx)(f.a,{control:Fe,name:"placeOfSupplyId",id:"placeOfSupplyId",render:function(e){var t=e.field,n=e.ref;return Object(z.jsx)(v.a,Object(c.a)(Object(c.a)({inputRef:n,className:N()("react-select",{"is-invalid":Pe.placeOfSupplyId})},t),{},{classNamePrefix:"select",options:D,value:D.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),He()},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})}),""!==re.gstin&&void 0!==re.gstin&&Object(z.jsxs)("div",{className:"mt-1",children:[" GSTIN : ",re.gstin]})]}),Object(z.jsx)(h.B,{className:"pe-0 mt-xl-0 mt-2",xl:"4",children:Object(z.jsx)("table",{children:Object(z.jsx)("tbody",{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{className:"pe-1",children:"RCM Applicable:"}),Object(z.jsx)("td",{children:Object(z.jsx)("div",{className:"form-switch form-check-success",children:Object(z.jsx)(f.a,{control:Fe,name:"isRcmApplicable",id:"isRcmApplicable",render:function(e){return Object(a.a)(e),Object(z.jsx)(h.L,{type:"switch",id:"switch-success",defaultChecked:!0})}})})})]})})})})]})]}),Object(z.jsxs)(h.m,{className:"invoice-padding invoice-product-details",children:[Ve.map((function(e,t){var n,a,i,r,s,o,l,d,u,p,j,m,x,O,g,I;return Object(z.jsx)("div",{className:"repeater-wrapper",children:Object(z.jsx)(h.jb,{children:Object(z.jsxs)(h.B,{className:"d-lg-flex product-details-border position-relative pe-0",sm:"12",children:[Object(z.jsxs)(h.jb,{className:"w-100 pe-lg-0 pe-1 py-2",children:[Object(z.jsxs)(h.B,{className:"mb-lg-0 mb-2 mt-lg-0 mt-2 col-lg-4 col-sm-12",children:[Object(z.jsx)(h.u,{className:"col-title mb-md-50 mb-0",children:"Item"}),Object(z.jsx)(f.a,{control:Fe,name:"rows[".concat(t,"].serviceId"),rules:{required:!0},render:function(e){var n,a,i=e.field,r=e.ref;return Object(z.jsx)(v.a,Object(c.a)(Object(c.a)({},i),{},{inputRef:r,className:N()("react-select",{"is-invalid":null===(n=Pe.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.serviceId}),classNamePrefix:"select",options:w,value:w.find((function(e){return e.id===i.value})),onChange:function(e){i.onChange(e.id),Je(t,!1,!1,!1,!1,!0)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),(null===(n=Pe.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.serviceId)&&Object(z.jsx)(h.I,{children:null===(i=Pe.rows)||void 0===i||null===(r=i[t])||void 0===r?void 0:r.serviceId.message}),Object(z.jsx)(f.a,{id:"rows_".concat(t,"_description"),name:"rows[".concat(t,"].description"),control:Fe,render:function(e){var n,a,i=e.field;return Object(z.jsx)(h.L,Object(c.a)({className:"mt-1",invalid:(null===(n=Pe.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.description)&&!0,onInput:function(e){i.onChange(e),Je(t,!0,!1,!1,!1,!1)}},i))}})]}),Object(z.jsxs)(h.B,{className:"my-lg-0 my-2 col-lg-2 col-sm-12",children:[Object(z.jsx)(h.u,{className:"col-title mb-md-2 mb-0",children:"SAC Code"}),Object(z.jsx)(f.a,{id:"rows_".concat(t,"_sacCode"),name:"rows[".concat(t,"].sacCode"),control:Fe,render:function(e){var n,a,i=e.field;return Object(z.jsx)(h.L,Object(c.a)({type:"text",invalid:(null===(n=Pe.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.sacCode)&&!0,onInput:function(e){i.onChange(e),Je(t,!1,!0,!0,!1,!1)}},i))}}),(null===(s=Pe.rows)||void 0===s||null===(o=s[t])||void 0===o?void 0:o.sacCode)&&Object(z.jsx)(h.I,{children:null===(l=Pe.rows)||void 0===l||null===(d=l[t])||void 0===d?void 0:d.sacCode.message})]}),Object(z.jsxs)(h.B,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(z.jsx)(h.u,{className:"col-title mb-md-2 mb-0",children:"Price"}),Object(z.jsx)(f.a,{id:"rows_".concat(t,"_price"),name:"rows[".concat(t,"].price"),control:Fe,render:function(e){var n,a,i=e.field;return Object(z.jsx)(h.L,Object(c.a)(Object(c.a)({type:"number",id:"input_rows_".concat(t,"_price"),onInput:function(e){i.onChange(e),console.log(e),Je(t,!1,!0,!1,!1,!1)}},i),{},{invalid:(null===(n=Pe.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.price)&&!0}))}}),(null===(u=Pe.rows)||void 0===u||null===(p=u[t])||void 0===p?void 0:p.price)&&Object(z.jsx)(h.I,{children:null===(j=Pe.rows)||void 0===j||null===(m=j[t])||void 0===m?void 0:m.price.message})]}),Object(z.jsxs)(h.B,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(z.jsx)(h.u,{className:"col-title mb-md-50 mb-0",children:"Tax Rate"}),Object(z.jsx)(f.a,{control:Fe,name:"rows[".concat(t,"].taxGroupId"),rules:{required:!0},render:function(e){var n,a,i=e.field,r=e.ref;return Object(z.jsx)(v.a,Object(c.a)(Object(c.a)({},i),{},{inputRef:r,className:N()("react-select",{"is-invalid":null===(n=Pe.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.taxGroupId}),classNamePrefix:"select",options:L,value:L.find((function(e){return e.id===i.value})),onChange:function(e){i.onChange(e.id),Je(t,!1,!0,!1,!0,!1)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),(null===(x=Pe.rows)||void 0===x||null===(O=x[t])||void 0===O?void 0:O.taxGroupId)&&Object(z.jsx)(h.I,{children:null===(g=Pe.rows)||void 0===g||null===(I=g[t])||void 0===I?void 0:I.taxGroupId.message}),!e.isTaxApplicable&&Object(z.jsx)(f.a,{control:Fe,name:"rows[".concat(t,"].exemptionReasonId"),rules:{required:!0},render:function(e){var n,a,i=e.field,r=e.ref;return Object(z.jsx)(v.a,Object(c.a)(Object(c.a)({},i),{},{inputRef:r,className:N()("react-select mt-1",{"is-invalid":null===(n=Pe.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.taxGroupId}),classNamePrefix:"select",options:Ne,value:Ne.find((function(e){return e.id===i.value})),onChange:function(e){i.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})]}),Object(z.jsxs)(h.B,{className:"my-lg-0 mt-2",lg:"1",sm:"12",children:[Object(z.jsx)(h.u,{className:"col-title mb-md-50 mb-0",children:"Amount"}),e.subTotalAmount]})]}),Object(z.jsx)("div",{className:"d-lg-flex justify-content-center border-start invoice-product-actions py-50 px-25",children:Object(z.jsx)(b.a,{size:18,className:"cursor-pointer",onClick:function(){_e(t),qe()}})})]})})},e.id)})),Object(z.jsx)(h.jb,{className:"mt-1",children:Object(z.jsx)(h.B,{sm:"12",className:"px-0",children:Object(z.jsxs)(h.i,{color:"primary",size:"sm",className:"btn-add-new",onClick:function(){return Ge()},children:[Object(z.jsx)(m.a,{size:14,className:"me-25"})," ",Object(z.jsx)("span",{className:"align-middle",children:"Add Item"})]})})})]}),Object(z.jsx)(h.m,{className:"invoice-padding",children:Object(z.jsxs)(h.jb,{className:"invoice-sales-total-wrapper",children:[Object(z.jsx)(h.B,{className:"mt-md-0 mt-3",md:{size:"6",order:1},xs:{size:12,order:2}}),Object(z.jsx)(h.B,{className:"d-flex justify-content-end",md:{size:"6",order:2},xs:{size:12,order:1},children:Object(z.jsxs)("div",{className:"invoice-total-wrapper",children:[Object(z.jsxs)("div",{className:"invoice-total-item",children:[Object(z.jsx)("p",{className:"invoice-total-title",children:"Pre Tax Amount:"}),Object(z.jsx)("p",{className:"invoice-total-amount",children:Q})]}),xe.map((function(e,t){return Object(z.jsxs)("div",{className:"invoice-total-item",children:[Object(z.jsx)("p",{className:"invoice-total-title",children:null===e||void 0===e?void 0:e.taxName}),Object(z.jsx)("p",{className:"invoice-total-amount",children:null===e||void 0===e?void 0:e.taxAmount})]},t)})),Object(z.jsx)("hr",{className:"my-50"}),Object(z.jsxs)("div",{className:"invoice-total-item",children:[Object(z.jsx)("p",{className:"invoice-total-title",children:"Total Payable:"}),Object(z.jsx)("p",{className:"invoice-total-amount",children:Y})]})]})})]})}),Object(z.jsx)("hr",{className:"invoice-spacing mt-0"}),Object(z.jsx)(h.m,{className:"invoice-padding py-0",children:Object(z.jsx)(h.jb,{children:Object(z.jsx)(h.B,{children:Object(z.jsxs)("div",{className:"mb-2",children:[Object(z.jsx)(h.O,{for:"note",className:"form-label fw-bold",children:"Note:"}),Object(z.jsx)(f.a,{id:"note",name:"note",control:Fe,render:function(e){var t=e.field;return Object(z.jsx)(h.L,Object(c.a)({type:"textarea",value:t.value,invalid:Pe.note&&!0},t))}})]})})})})]})}),Object(z.jsxs)(h.B,{xl:2,md:4,sm:12,children:[Object(z.jsx)(h.l,{className:"invoice-action-wrapper",children:Object(z.jsxs)(h.m,{children:[Object(z.jsx)(h.i,{color:"primary",type:"submit",block:!0,outline:!0,className:"mb-75",children:"Save"}),Object(z.jsx)(h.i,{color:"warning",block:!0,outline:!0,tag:C.b,to:"/invoice/list",children:"Cancel"})]})}),Object(z.jsx)("div",{className:"mt-2",children:Object(z.jsxs)("div",{className:"invoice-payment-option",children:[Object(z.jsx)("p",{className:"mb-50",children:"Accept payments via"}),Object(z.jsx)(f.a,{control:Fe,name:"bankAccountId",rules:{required:!0},render:function(e){var t=e.field,n=e.ref;return Object(z.jsx)(v.a,Object(c.a)(Object(c.a)({},t),{},{inputRef:n,className:N()("react-select mt-1",{"is-invalid":Pe.bankAccountId}),classNamePrefix:"select",options:H,value:H.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),function(e){var t=H.find((function(t){return t.id===e}));me(t),Te("bankAccountBankName",t.bankName),Te("bankAccountBranchName",t.branchAddress),Te("bankAccountHolderName",t.accountHolderName),Te("bankAccountId",t.id),Te("bankAccountIfscCode",t.ifscCode),Te("bankAccountNumber",t.accountNumber)}(e.id)},getOptionLabel:function(e){return e.accountHolderName},getOptionValue:function(e){return e.id}}))}})]})})]})]})})})};t.default=function(){return Object(z.jsx)("div",{className:"invoice-add-wrapper",children:Object(z.jsx)(T,{})})}},499:function(e,t,n){},503:function(e,t,n){},513:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var a=function(){return null===localStorage.getItem("activeOrganization")?null:JSON.parse(localStorage.getItem("activeOrganization")).id},c=function(){return null===localStorage.getItem("activeOrganization")?null:JSON.parse(localStorage.getItem("activeOrganization"))}},514:function(e,t,n){},611:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"g",(function(){return j})),n.d(t,"h",(function(){return b})),n.d(t,"i",(function(){return m})),n.d(t,"e",(function(){return v})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return x}));var a=n(11),c=n(4),i=n(2),r=n.n(i),s=n(3),o=n(6),l=Object(s.b)("appInvoice/getData",function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/taskinvoices/list",t);case 2:return n=e.sent,e.abrupt("return",{params:t,data:n.data.taskinvoices.taskinvoices,totalPages:n.data.taskinvoices.total});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d=Object(s.b)("appInvoice/addInvoice",function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,o.a.post("/taskinvoices/create",t);case 4:return c=e.sent,e.abrupt("return",{invoices:c.data.taskinvoices});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(getExceptionPayload(e.t0)));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),u=Object(s.b)("appInvoice/addInvoiceItems",function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,o.a.post("/taskinvoiceitems/create",{rows:t});case 4:return c=e.sent,e.abrupt("return",{invoiceItems:c.data.taskinvoiceitems});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(getExceptionPayload(e.t0)));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),p=Object(s.b)("appInvoice/getInvoice",function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/taskinvoices/get",{id:t});case 2:return n=e.sent,e.abrupt("return",{invoice:n.data.taskinvoices});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j=Object(s.b)("appInvoice/getInvoiceItem",function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/taskinvoiceitems/list",{invoiceId:t});case 2:return n=e.sent,e.abrupt("return",n.data.taskinvoiceitems);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b=(Object(s.b)("appInvoice/getInvoiceTax",function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/invoicetaxes/list",{invoiceId:t});case 2:return n=e.sent,e.abrupt("return",n.data.invoicetaxes);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(s.b)("appInvoice/getInvoiceItemTax",function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/invoiceitemtaxes/list",{invoiceId:t});case 2:return n=e.sent,e.abrupt("return",n.data.invoiceitemtaxes);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(s.b)("appInvoice/updateInvoice",function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,o.a.post("/taskinvoices/update",t);case 4:return c=e.sent,e.abrupt("return",{invoices:c.data.taskinvoices});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(getExceptionPayload(e.t0)));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}())),m=Object(s.b)("appInvoice/updateInvoiceItems",function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,o.a.post("/taskinvoiceitems/update",{rows:t});case 4:return c=e.sent,e.abrupt("return",{invoiceItems:c.data.taskinvoiceitems});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(getExceptionPayload(e.t0)));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),v=Object(s.b)("appInvoice/getClient",function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/clients/get",{id:t});case 2:return n=e.sent,e.abrupt("return",n.data.clients);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f=Object(s.b)("appInvoice/deleteInvoice",function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,c=n.getState,e.next=3,o.a.post("/invoices/delete",{id:t});case 3:return e.next=5,a(l(c().invoice.params));case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),x=Object(s.b)("appInvoice/deleteInvoiceItem",function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(a.a)(n),e.next=3,o.a.post("/taskinvoiceitems/delete",{id:t});case 3:return e.abrupt("return",[]);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());Object(s.c)({name:"appInvoice",initialState:{data:[],total:1,params:{},allData:[],invoiceId:null,invoiceItems:[],selectedInvoice:null},reducers:{},extraReducers:function(e){e.addCase(l.fulfilled,(function(e,t){e.data=t.payload.data,e.allData=t.payload.allData,e.total=t.payload.totalPages,e.params=t.payload.params})),e.addCase(d.fulfilled,(function(e,t){e.invoiceId=t.payload.invoices.id})),e.addCase(b.fulfilled,(function(e,t){e.invoiceId=t.payload.invoices.id})),e.addCase(u.fulfilled,(function(e,t){e.invoiceItems=t.payload.invoiceItems})),e.addCase(m.fulfilled,(function(e,t){e.invoiceItems=t.payload.invoiceItems})),e.addCase(p.fulfilled,(function(e,t){e.selectedInvoice=t.payload.invoice}))}}).reducer},672:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var a=function(e,t,n){var a=0;return 1===n?a=parseFloat(e)-parseFloat(e)*(100/(100+parseFloat(t))):2===n&&(a=parseFloat(e)*parseFloat(t)/100),parseFloat(a)},c=function(e){return JSON.parse(e.replace(/\\/g,""))}}}]);
//# sourceMappingURL=53.de5c9e3f.chunk.js.map
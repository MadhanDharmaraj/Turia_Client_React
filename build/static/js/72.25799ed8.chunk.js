(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[72],{1681:function(e,t,n){"use strict";n.r(t);var i=n(16),a=(n(133),n(4)),c=n(17),s=n(2),r=n.n(s),l=n(1),o=n(131),d=n(5),u=n.n(d),j=n(6),m=n(512),b=n.n(m),O=n(826),v=n(819),f=(n(590),n(500)),g=n(498),x=n(510),p=n(511),h=n(149),N=n(90),y=(n(514),n(502),n(499),n(503),n(513)),I=n(132),C=n(12),S=Object(y.b)(),_=Object(y.a)(),z=function(){var e,t,n,s,d,m,y,z=Object(l.useRef)(null),w=Object(l.useState)(!1),A=(Object(c.a)(w,1)[0],Object(l.useState)("")),k=Object(c.a)(A,2),P=k[0],B=k[1],L=x.f().shape({clientId:x.e().required("Please select a Client"),serviceId:x.e().required("Please select a Service"),assignee:x.a().min(1,"Please select Assignee"),reviewer:x.a(),clientAccessFlag:x.c().default(!1),organizationId:x.e().default(S),taskStatus:x.e().default(1),invoiceId:x.e().default(0),startDate:x.h().nullable().required("Please Select Start Date"),endDate:x.h().nullable().required("Please Select End Date"),priority:x.h().required("Please select a Priority"),invoiceFlag:x.c().default(!1)}),D=Object(g.f)({resolver:Object(p.a)(L),defaultValues:L.cast()}),F=D.handleSubmit,R=D.formState.errors,q=D.control,V=D.setValue,E=[{id:1,name:"Low"},{id:2,name:"Medium"},{id:3,name:"High"}],M=Object(l.useState)([{id:1,name:"Madhan"},{id:2,name:"Kavin"},{id:3,name:"Akhalya"}]),J=Object(c.a)(M,2),Y=J[0],K=J[1],T=Object(l.useState)([{id:1,name:"Madhan"},{id:2,name:"Kavin"},{id:3,name:"Akhalya"}]),U=Object(c.a)(T,2),G=U[0],Z=U[1],H=[{id:1,name:"Madhan"},{id:2,name:"Kavin"},{id:3,name:"Akhalya"}],Q=Object(I.b)(),W=Object(l.useState)([]),X=Object(c.a)(W,2),$=X[0],ee=X[1],te=Object(l.useState)([]),ne=Object(c.a)(te,2),ie=ne[0],ae=ne[1],ce=Object(l.useState)([]),se=Object(c.a)(ce,2),re=se[0],le=se[1],oe=Object(l.useState)(!0),de=Object(c.a)(oe,2),ue=de[0],je=de[1],me=Object(l.useState)([]),be=Object(c.a)(me,2),Oe=be[0],ve=be[1],fe=Object(l.useState)({}),ge=Object(c.a)(fe,2),xe=ge[0],pe=ge[1],he=Object(l.useState)({}),Ne=Object(c.a)(he,2),ye=Ne[0],Ie=Ne[1],Ce=Object(g.e)({name:"invoice_items",keyName:"rowid",control:q}),Se=Ce.fields,_e=Ce.append,ze=Ce.remove,we=function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),console.log(ye),e.next=4,Q(Object(h.a)(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(Object(h.d)(t));case 2:n=e.sent,pe(n.payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){_e({invoiceId:0,organizationId:S,serviceId:"",sacCode:"",actualPrice:0,taxGroupId:"",subTotalAmount:0,taxPrice:0,description:""})},Pe=function(){var e=1;_.stateid===xe.placeofsupplyid&&(e=2),function(e){var t={type:e};j.a.post("/taxvalues/list",t).then((function(e){var t=e.data;ve(t.taxvalues)})),console.log(Oe)}(e)};Object(l.useEffect)((function(){if(Object.keys(xe).length>0){var e={};e.billingAddressCity=xe.billingaddresscity,e.billingAddressLine1=xe.billingaddressline1,e.billingAddressLine2=xe.billingaddressline1,e.billingAddressState=xe.billingaddressstatesname,e.billingAddressZipCode=xe.billingaddresszip,e.billingCurrencyId=parseInt(xe.currencyid),e.billingCurrencySymbol=xe.currenciessymbol,e.billingCurrencyShortName=xe.currenciescode,e.billingCurrencyName=xe.currenciesname,e.contactEmail=xe.email,e.gstin=xe.gstin,e.isRcmApplicable=!1,e.contactName=xe.name,e.placeOfSupplyId=xe.placeofsupplyid,e.contactId=xe.id,e.organizationAddressLine1=_.addressline1,e.organizationAddressLine2=_.addressline2,e.organizationCity=_.organizationcity,e.organizationState=_.statename,e.organizationZipCode=_.pinzipcode,e.organizationName=_.name,e.organizationImageUrl="",e.organizationStateCode=_.stateshortname,e.organizationGstin=_.gstin,Ie(e),Pe()}}),[xe]),Object(l.useEffect)((function(){j.a.post("/clients/dropdown").then((function(e){var t=e.data;ee(t.clients)})),j.a.post("/services/dropdown").then((function(e){var t=e.data;ae(t.services)})),j.a.post("/taxgroups/dropdown").then((function(e){var t=e.data;le(t.taxgroups)}))}),[]),Object(l.useEffect)((function(){ke()}),[]);var Be=function(e){var t,n=Array.isArray(e)?e.map((function(e){return e.id})):[];t=n.length>0?H.filter((function(e){var t=e.id;return!n.some((function(e){return e===t}))})):H,Z(t),V("assignee",n)},Le=function(e){var t,n=Array.isArray(e)?e.map((function(e){return e.id})):[];t=n.length>0?H.filter((function(e){var t=e.id;return!n.some((function(e){return e===t}))})):H,K(t),V("reviewer",n)};return Object(C.jsxs)("form",{onSubmit:F(we),children:[Object(C.jsxs)(N.l,{className:"invoice-preview-card",children:[Object(C.jsx)(N.m,{className:"pb-2 px-2",children:Object(C.jsxs)(N.jb,{children:[Object(C.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[Object(C.jsxs)(N.jb,{className:"mb-1",children:[Object(C.jsx)(N.O,{sm:"3",size:"lg",className:"form-label",for:"clientId",children:"Client"}),Object(C.jsxs)(N.B,{sm:"9",children:[Object(C.jsx)(g.a,{control:q,name:"clientId",id:"clientId",render:function(e){var t=e.field,n=e.value,a=e.ref;return Object(C.jsx)(f.a,Object(i.a)(Object(i.a)(Object(i.a)({},t),{},{inputRef:a,className:u()("react-select",{"is-invalid":R.clientId})},t),{},{classNamePrefix:"select",options:$,value:$.find((function(e){return e.id===n})),onChange:function(e){t.onChange(e.id),Ae(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),R.clientId&&Object(C.jsx)(N.I,{className:"text-danger",children:null===(e=R.clientId)||void 0===e?void 0:e.message})]})]}),Object(C.jsxs)(N.jb,{className:"mb-1",children:[Object(C.jsx)(N.O,{sm:"3",size:"lg",className:"form-label",for:"serviceId",children:"Service"}),Object(C.jsxs)(N.B,{sm:"9",children:[Object(C.jsx)(g.a,{control:q,name:"serviceId",id:"serviceId",render:function(e){var t=e.field,n=e.value,a=e.ref;return Object(C.jsx)(f.a,Object(i.a)(Object(i.a)(Object(i.a)({},t),{},{inputRef:a,className:u()("react-select",{"is-invalid":R.serviceId})},t),{},{classNamePrefix:"select",options:ie,value:ie.find((function(e){return e.id===n})),onChange:function(e){return t.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),R.serviceId&&Object(C.jsx)(N.I,{className:"text-danger",children:null===(t=R.serviceId)||void 0===t?void 0:t.message})]})]}),Object(C.jsxs)(N.jb,{className:"mb-1",children:[Object(C.jsx)(N.O,{sm:"3",size:"lg",className:"form-label",for:"description",children:"Description"}),Object(C.jsxs)(N.B,{sm:"9",children:[Object(C.jsx)(g.a,{id:"description",name:"description",control:q,render:function(e){var t=e.field;return Object(C.jsx)(N.L,Object(i.a)({type:"textarea",invalid:R.description&&!0},t))}}),R.description&&Object(C.jsx)(N.I,{children:R.description.message})]})]}),Object(C.jsx)(N.jb,{className:"my-2",children:Object(C.jsx)(N.B,{children:Object(C.jsxs)("div",{className:"d-lg-flex",children:[Object(C.jsx)("input",{type:"file",className:"hidden",multiple:!0,onChange:function(e){console.log(e.target.files)},ref:z}),Object(C.jsxs)(N.i,{type:"button",outline:!0,color:"primary",onClick:function(){return z.current.click()},children:[Object(C.jsx)(O.a,{size:14,className:"me-25"})," Add Attachment"]})]})})})]}),Object(C.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[Object(C.jsxs)(N.jb,{className:"mb-1",children:[Object(C.jsx)(N.O,{sm:"3",size:"lg",className:"form-label",for:"assignee",children:"Assignee"}),Object(C.jsxs)(N.B,{sm:"9",children:[Object(C.jsx)(g.a,{control:q,name:"assignee",id:"assignee",render:function(e){var t=e.field,n=e.value,a=e.ref;return Object(C.jsx)(f.a,Object(i.a)(Object(i.a)({inputRef:a,className:u()("react-select",{"is-invalid":R.assignee})},t),{},{classNamePrefix:"select",options:Y,isMulti:!0,value:n,onChange:Be,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),R.assignee&&Object(C.jsx)(N.I,{className:"text-danger",children:null===(n=R.assignee)||void 0===n?void 0:n.message})]})]}),Object(C.jsxs)(N.jb,{className:"mb-1",children:[Object(C.jsx)(N.O,{sm:"3",size:"lg",className:"form-label",for:"reviewer",children:"Reviewer"}),Object(C.jsxs)(N.B,{sm:"9",children:[Object(C.jsx)(g.a,{control:q,name:"reviewer",id:"reviewer",render:function(e){var t=e.field,n=e.value,a=e.ref;return Object(C.jsx)(f.a,Object(i.a)(Object(i.a)({inputRef:a,className:u()("react-select",{"is-invalid":R.reviewer})},t),{},{classNamePrefix:"select",options:G,isMulti:!0,value:n,onChange:Le,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),R.reviewer&&Object(C.jsx)(N.I,{className:"text-danger",children:null===(s=R.reviewer)||void 0===s?void 0:s.message})]})]}),Object(C.jsxs)(N.jb,{className:"mb-1",children:[Object(C.jsx)(N.O,{sm:"3",size:"lg",className:"form-label",for:"startDate",children:"Start Date"}),Object(C.jsxs)(N.B,{sm:"9",children:[Object(C.jsx)(g.a,{value:P,name:"startDate",control:q,rules:{required:!0},options:{dateFormat:"d-m-Y"},render:function(e){var t=e.field;return Object(C.jsx)(b.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"U"},className:"form-control due-date-picker"})}}),R.startDate&&Object(C.jsx)(N.I,{className:"text-danger",children:null===(d=R.startDate)||void 0===d?void 0:d.message})]})]}),Object(C.jsxs)(N.jb,{className:"mb-1",children:[Object(C.jsx)(N.O,{sm:"3",size:"lg",className:"form-label",for:"endDate",children:"End Date"}),Object(C.jsxs)(N.B,{sm:"9",children:[Object(C.jsx)(g.a,{value:P,onChange:function(e){return B(e)},name:"endDate",control:q,rules:{required:!0},options:{dateFormat:"d-m-Y"},render:function(e){var t=e.field;return Object(C.jsx)(b.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"U"},className:"form-control due-date-picker"})}}),R.endDate&&Object(C.jsx)(N.I,{className:"text-danger",children:null===(m=R.endDate)||void 0===m?void 0:m.message})]})]}),Object(C.jsxs)(N.jb,{className:"mb-1",children:[Object(C.jsx)(N.O,{sm:"3",size:"lg",className:"form-label",for:"priority",children:"Priority"}),Object(C.jsxs)(N.B,{sm:"9",children:[Object(C.jsx)(g.a,{control:q,name:"priority",id:"priority",render:function(e){var t=e.field,n=e.value,a=e.ref;return Object(C.jsx)(f.a,Object(i.a)(Object(i.a)(Object(i.a)({},t),{},{inputRef:a,className:u()("react-select",{"is-invalid":R.priority})},t),{},{classNamePrefix:"select",options:E,value:E.find((function(e){return e.id===n})),onChange:function(e){return t.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),R.priority&&Object(C.jsx)(N.I,{className:"text-danger",children:null===(y=R.priority)||void 0===y?void 0:y.message})]})]})]})]})}),Object(C.jsx)("hr",{className:"invoice-spacing"}),Object(C.jsx)(N.jb,{className:"px-1 pb-2",children:Object(C.jsxs)("div",{className:"form-check form-check-primary mx-2",children:[Object(C.jsx)(g.a,{control:q,name:"invoiceFlag",rules:{required:!0},render:function(e){var t=e.field;return Object(C.jsx)(N.L,Object(i.a)(Object(i.a)({className:"form-check-input",type:"checkbox",id:"invoice_flag"},t),{},{onChange:function(){return je(!ue)}}))}}),Object(C.jsx)(N.O,{className:"form-check-label",for:"invoice_flag",children:"Create Proposal for this Task"})]})}),ue&&Object(C.jsxs)(N.m,{className:"invoice-padding invoice-product-details",children:[Se.map((function(e,t){var n,a,c,s,r,l,o,d,j,m,b,O,x,p,h,y,I,S,_,z;return Object(C.jsx)("div",{className:"repeater-wrapper",children:Object(C.jsx)(N.jb,{children:Object(C.jsxs)(N.B,{className:"d-lg-flex product-details-border position-relative pe-0 ps-sm-0",sm:"12",children:[Object(C.jsxs)(N.jb,{className:"w-100 pe-lg-0 py-2 ms-sm-1",children:[Object(C.jsxs)(N.B,{className:"my-lg-0 my-2",lg:"4",sm:"12",children:[Object(C.jsx)(N.u,{className:"col-title mb-md-50 mb-0",children:"Item"}),Object(C.jsx)(g.a,{control:q,name:"invoice_items.".concat(t,".itemId"),rules:{required:!0},render:function(e){var n,i,a=e.field,c=e.value,s=e.ref;return Object(C.jsx)(f.a,{inputRef:s,className:u()("react-select",{"is-invalid":null===(n=R.invoice_items)||void 0===n||null===(i=n[t])||void 0===i?void 0:i.itemId}),classNamePrefix:"select",options:ie,value:ie.find((function(e){return e.id===c})),onChange:function(e){return a.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}})}}),(null===(n=R.invoice_items)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.itemId)&&Object(C.jsx)(N.I,{className:"text-danger",children:null===(c=R.invoice_items)||void 0===c||null===(s=c[t])||void 0===s||null===(r=s.itemId)||void 0===r?void 0:r.message})]}),Object(C.jsxs)(N.B,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(C.jsx)(N.u,{className:"col-title mb-md-2 mb-0",children:"SAC Code"}),Object(C.jsx)(g.a,{name:"invoice_items.".concat(t,".sac_code"),control:q,render:function(e){var n,a,c=e.field;return Object(C.jsx)(N.L,Object(i.a)({type:"text",invalid:(null===(n=R.invoice_items)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.sac_code)&&!0},c))}}),(null===(l=R.invoice_items)||void 0===l||null===(o=l[t])||void 0===o?void 0:o.sac_code)&&Object(C.jsx)(N.I,{children:null===(d=R.invoice_items)||void 0===d||null===(j=d[t])||void 0===j||null===(m=j.sac_code)||void 0===m?void 0:m.message})]}),Object(C.jsxs)(N.B,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(C.jsx)(N.u,{className:"col-title mb-md-2 mb-0",children:"Price"}),Object(C.jsx)(g.a,{name:"invoice_items.".concat(t,".price"),control:q,render:function(e){var n,a,c=e.field;return Object(C.jsx)(N.L,Object(i.a)({type:"number",invalid:(null===(n=R.invoice_items)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.price)&&!0},c))}}),(null===(b=R.invoice_items)||void 0===b||null===(O=b[t])||void 0===O?void 0:O.price)&&Object(C.jsx)(N.I,{children:null===(x=R.invoice_items)||void 0===x||null===(p=x[t])||void 0===p||null===(h=p.price)||void 0===h?void 0:h.message})]}),Object(C.jsxs)(N.B,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(C.jsx)(N.u,{className:"col-title mb-md-50 mb-0",children:"Tax Rate"}),Object(C.jsx)(g.a,{control:q,name:"invoice_items.".concat(t,".tax_group_id"),rules:{required:!0},render:function(e){var n,i,a=e.field,c=e.value,s=e.ref;return Object(C.jsx)(f.a,{inputRef:s,className:u()("react-select",{"is-invalid":null===(n=R.invoice_items)||void 0===n||null===(i=n[t])||void 0===i?void 0:i.tax_group_id}),classNamePrefix:"select",options:re,value:re.find((function(e){return e.id===c})),onChange:function(e){return a.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}})}}),(null===(y=R.invoice_items)||void 0===y||null===(I=y[t])||void 0===I?void 0:I.tax_group_id)&&Object(C.jsx)(N.I,{className:"text-danger",children:null===(S=R.invoice_items)||void 0===S||null===(_=S[t])||void 0===_||null===(z=_.tax_group_id)||void 0===z?void 0:z.message})]}),Object(C.jsx)(N.B,{className:"my-lg-0 mt-2",lg:"1",sm:"12",children:Object(C.jsx)(N.u,{className:"col-title mb-md-50 mb-0",children:"Amount"})})]}),Object(C.jsx)("div",{className:"d-lg-flex justify-content-center border-start invoice-product-actions py-50 px-25",children:Object(C.jsx)(v.a,{size:18,className:"cursor-pointer",onClick:function(){ze(t)}})})]})})},e.rowid)})),Object(C.jsx)(N.jb,{className:"mt-1",children:Object(C.jsx)(N.B,{sm:"12",className:"px-0",children:Object(C.jsxs)(N.i,{color:"primary",size:"sm",className:"btn-add-new",onClick:function(){return ke()},children:[Object(C.jsx)(O.a,{size:14,className:"me-25"})," ",Object(C.jsx)("span",{className:"align-middle",children:"Add Item"})]})})})]})]}),Object(C.jsx)(N.l,{children:Object(C.jsx)(N.m,{children:Object(C.jsxs)("div",{className:"modal-footer border-0",children:[Object(C.jsx)(N.i,{className:"add-new-user",outline:!0,color:"warning",tag:o.b,to:"/task/list",children:"Cancel"}),Object(C.jsx)(N.i,{color:"primary",type:"submit",children:"Save"})]})})})]})};t.default=function(){return Object(C.jsx)("div",{className:"invoice-add-wrapper",children:Object(C.jsx)(N.jb,{className:"invoice-add",children:Object(C.jsx)(N.B,{xl:12,md:12,sm:12,children:Object(C.jsx)(z,{})})})})}},499:function(e,t,n){},503:function(e,t,n){},513:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var i=function(){return null===localStorage.getItem("activeOrganization")?null:JSON.parse(localStorage.getItem("activeOrganization")).id},a=function(){return null===localStorage.getItem("activeOrganization")?null:JSON.parse(localStorage.getItem("activeOrganization"))}},514:function(e,t,n){}}]);
//# sourceMappingURL=72.25799ed8.chunk.js.map
(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[81],{1682:function(e,i,s){"use strict";s.r(i);var t=s(16),c=(s(133),s(17)),a=s(1),n=s(131),l=s(5),r=s.n(l),d=s(7),o=s.n(d),j=s(512),m=s.n(j),u=s(826),b=s(819),v=(s(590),s(500)),O=s(498),x=s(510),f=s(511),h=s(90),p=(s(514),s(502),s(499),s(503),s(12)),g=function(){var e,i,s,l,d,j,g,N=Object(a.useRef)(null),_=Object(a.useState)(!1),y=(Object(c.a)(_,1)[0],Object(a.useState)("")),C=Object(c.a)(y,2),S=C[0],P=C[1],k=x.f().shape({client_id:x.e().required("Please select a Client"),service_id:x.e().required("Please select a Service"),assignee:x.a().min(1,"Please select Assignee"),isRecurring:x.b().default(!1),description:x.h(),taskStatus:x.e().default(1),invoiceId:x.e().default(null),start_date:x.e().nullable().required("Please Select Start Date"),end_date:x.e().nullable().required("Please Select End Date"),priority:x.e().required("Please select a Priority"),invoice_items:x.a().of(x.f().shape({item_id:x.h().required("Please Select Service"),sac_code:x.h(),price:x.e().min(1).positive("Must be more than 0").required(),tax_group_id:x.h().required("Pleace Select Tax")}))}),w=Object(O.f)({resolver:Object(f.a)(k),defaultValues:{client_id:"",service_id:"",description:"",assignee:[],reviewer:[],start_date:null,end_date:null,priority:"",invoice_items:[]}}),B=w.register,I=w.handleSubmit,q=w.formState.errors,z=w.control,A=w.setValue,R=Object(a.useState)([]),F=Object(c.a)(R,2),D=F[0],E=F[1],L=Object(a.useState)([]),T=Object(c.a)(L,2),Y=T[0],M=T[1],J=Object(a.useState)([]),U=Object(c.a)(J,2),V=U[0],G=U[1],H=Object(a.useState)([]),K=Object(c.a)(H,2),Q=K[0],W=K[1],X=Object(a.useState)([]),Z=Object(c.a)(X,2),$=Z[0],ee=Z[1],ie=Object(a.useState)(!0),se=Object(c.a)(ie,2),te=se[0],ce=se[1],ae=Object(O.e)({name:"invoice_items",control:z}),ne=ae.fields,le=ae.append,re=ae.remove,de=function(){le({item_id:"",sac_code:"",price:0,tax_group_id:"",subTotal:0,taxPrice:0})};Object(a.useEffect)((function(){o.a.get("/api/task/utilities").then((function(e){var i=e.data;E(i.clients),M(i.services),G(i.priority),W(i.users),ee(i.tax_group)}))}),[]),Object(a.useEffect)((function(){de()}),[]);var oe=function(e){var i=Array.isArray(e)?e.map((function(e){return e.value})):[];A("assignee",i)},je=function(e){var i=Array.isArray(e)?e.map((function(e){return e.value})):[];A("reviewer",i)};return Object(p.jsxs)("form",{onSubmit:I((function(e){return console.log(e)})),children:[Object(p.jsxs)(h.l,{className:"invoice-preview-card",children:[Object(p.jsx)(h.m,{className:"pb-2 px-2",children:Object(p.jsxs)(h.jb,{children:[Object(p.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[Object(p.jsxs)(h.jb,{className:"mb-1",children:[Object(p.jsx)(h.O,{sm:"3",size:"lg",className:"form-label",for:"client_id",children:"Client"}),Object(p.jsxs)(h.B,{sm:"9",children:[Object(p.jsx)(O.a,{control:z,name:"client_id",id:"client_id",render:function(e){var i=e.field,s=e.value,c=e.ref;return Object(p.jsx)(v.a,Object(t.a)(Object(t.a)(Object(t.a)({},i),{},{inputRef:c,className:r()("react-select",{"is-invalid":q.client_id})},i),{},{classNamePrefix:"select",options:D,value:D.find((function(e){return e.value===s})),onChange:function(e){return i.onChange(e.value)}}))}}),q.client_id&&Object(p.jsx)(h.I,{className:"text-danger",children:null===(e=q.client_id)||void 0===e?void 0:e.message})]})]}),Object(p.jsxs)(h.jb,{className:"mb-1",children:[Object(p.jsx)(h.O,{sm:"3",size:"lg",className:"form-label",for:"service_id",children:"Service"}),Object(p.jsxs)(h.B,{sm:"9",children:[Object(p.jsx)(O.a,{control:z,name:"service_id",id:"service_id",render:function(e){var i=e.field,s=e.value,c=e.ref;return Object(p.jsx)(v.a,Object(t.a)(Object(t.a)(Object(t.a)({},i),{},{inputRef:c,className:r()("react-select",{"is-invalid":q.service_id})},i),{},{classNamePrefix:"select",options:Y,value:Y.find((function(e){return e.value===s})),onChange:function(e){return i.onChange(e.value)}}))}}),q.service_id&&Object(p.jsx)(h.I,{className:"text-danger",children:null===(i=q.service_id)||void 0===i?void 0:i.message})]})]}),Object(p.jsxs)(h.jb,{className:"mb-1",children:[Object(p.jsx)(h.O,{sm:"3",size:"lg",className:"form-label",for:"description",children:"Description"}),Object(p.jsxs)(h.B,{sm:"9",children:[Object(p.jsx)(O.a,{id:"description",name:"description",control:z,render:function(e){var i=e.field;return Object(p.jsx)(h.L,Object(t.a)({type:"textarea",invalid:q.description&&!0},i))}}),q.description&&Object(p.jsx)(h.I,{children:q.description.message})]})]}),Object(p.jsx)(h.jb,{className:"my-2",children:Object(p.jsx)(h.B,{children:Object(p.jsxs)("div",{className:"d-lg-flex",children:[Object(p.jsx)("input",{type:"file",className:"hidden",multiple:!0,onChange:function(e){console.log(e.target.files)},ref:N}),Object(p.jsxs)(h.i,{type:"button",outline:!0,color:"primary",onClick:function(){return N.current.click()},children:[Object(p.jsx)(u.a,{size:14,className:"me-25"})," Add Attachment"]})]})})})]}),Object(p.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[Object(p.jsxs)(h.jb,{className:"mb-1",children:[Object(p.jsx)(h.O,{sm:"3",size:"lg",className:"form-label",for:"assignee",children:"Assignee"}),Object(p.jsxs)(h.B,{sm:"9",children:[Object(p.jsx)(O.a,{control:z,name:"assignee",id:"assignee",render:function(e){var i=e.field,s=e.value,c=e.ref;return Object(p.jsx)(v.a,Object(t.a)(Object(t.a)({inputRef:c,className:r()("react-select",{"is-invalid":q.assignee})},i),{},{classNamePrefix:"select",options:Q,isMulti:!0,value:s,onChange:oe}))}}),q.assignee&&Object(p.jsx)(h.I,{className:"text-danger",children:null===(s=q.assignee)||void 0===s?void 0:s.message})]})]}),Object(p.jsxs)(h.jb,{className:"mb-1",children:[Object(p.jsx)(h.O,{sm:"3",size:"lg",className:"form-label",for:"reviewer",children:"Reviewer"}),Object(p.jsxs)(h.B,{sm:"9",children:[Object(p.jsx)(O.a,{control:z,name:"reviewer",id:"reviewer",render:function(e){var i=e.field,s=e.value,c=e.ref;return Object(p.jsx)(v.a,Object(t.a)(Object(t.a)({inputRef:c,className:r()("react-select",{"is-invalid":q.reviewer})},i),{},{classNamePrefix:"select",options:Q,isMulti:!0,value:s,onChange:je}))}}),q.reviewer&&Object(p.jsx)(h.I,{className:"text-danger",children:null===(l=q.reviewer)||void 0===l?void 0:l.message})]})]}),Object(p.jsxs)(h.jb,{className:"mb-1",children:[Object(p.jsx)(h.O,{sm:"3",size:"lg",className:"form-label",for:"start_date",children:"Start Date"}),Object(p.jsxs)(h.B,{sm:"9",children:[Object(p.jsx)(O.a,{value:S,name:"start_date",control:z,rules:{required:!0},options:{dateFormat:"d-m-Y"},render:function(e){var i=e.field;return Object(p.jsx)(m.a,{value:i.value,onChange:function(e,s){i.onChange(s)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"U"},className:"form-control due-date-picker"})}}),q.start_date&&Object(p.jsx)(h.I,{className:"text-danger",children:null===(d=q.start_date)||void 0===d?void 0:d.message})]})]}),Object(p.jsxs)(h.jb,{className:"mb-1",children:[Object(p.jsx)(h.O,{sm:"3",size:"lg",className:"form-label",for:"end_date",children:"End Date"}),Object(p.jsxs)(h.B,{sm:"9",children:[Object(p.jsx)(O.a,{value:S,onChange:function(e){return P(e)},name:"end_date",control:z,rules:{required:!0},options:{dateFormat:"d-m-Y"},render:function(e){var i=e.field;return Object(p.jsx)(m.a,{value:i.value,onChange:function(e,s){i.onChange(s)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"U"},className:"form-control due-date-picker"})}}),q.end_date&&Object(p.jsx)(h.I,{className:"text-danger",children:null===(j=q.end_date)||void 0===j?void 0:j.message})]})]}),Object(p.jsxs)(h.jb,{className:"mb-1",children:[Object(p.jsx)(h.O,{sm:"3",size:"lg",className:"form-label",for:"priority",children:"Priority"}),Object(p.jsxs)(h.B,{sm:"9",children:[Object(p.jsx)(O.a,{control:z,name:"priority",id:"priority",render:function(e){var i=e.field,s=e.value,c=e.ref;return Object(p.jsx)(v.a,Object(t.a)(Object(t.a)(Object(t.a)({},i),{},{inputRef:c,className:r()("react-select",{"is-invalid":q.priority})},i),{},{classNamePrefix:"select",options:V,value:V.find((function(e){return e.value===s})),onChange:function(e){return i.onChange(e.value)}}))}}),q.priority&&Object(p.jsx)(h.I,{className:"text-danger",children:null===(g=q.priority)||void 0===g?void 0:g.message})]})]})]})]})}),Object(p.jsx)("hr",{className:"invoice-spacing"}),Object(p.jsx)(h.jb,{className:"px-1",children:Object(p.jsxs)("div",{className:"form-check form-check-primary mx-2",children:[Object(p.jsx)(h.L,Object(t.a)(Object(t.a)({className:"form-check-input",defaultChecked:!0,type:"checkbox",id:"invoice_flag",name:"invoice_flag",value:!0},B("invoice_flag")),{},{onChange:function(){return ce(!te)}})),Object(p.jsx)(h.O,{className:"form-check-label",for:"invoice_flag",children:"Create Proposal for this Task"})]})}),Object(p.jsxs)(h.m,{className:"invoice-padding invoice-product-details",children:[ne.map((function(e,i){var s,c,a,n,l,d,o,j,m,u,x,f,g,N,_,y,C,S,P,k;return Object(p.jsx)("div",{className:"repeater-wrapper",children:Object(p.jsx)(h.jb,{children:Object(p.jsxs)(h.B,{className:"d-lg-flex product-details-border position-relative pe-0 ps-sm-0",sm:"12",children:[Object(p.jsxs)(h.jb,{className:"w-100 pe-lg-0 py-2 ms-sm-1",children:[Object(p.jsxs)(h.B,{className:"my-lg-0 my-2",lg:"4",sm:"12",children:[Object(p.jsx)(h.u,{className:"col-title mb-md-50 mb-0",children:"Item"}),Object(p.jsx)(O.a,{control:z,name:"invoice_items.".concat(i,".item_id"),rules:{required:!0},render:function(e){var s,t,c=e.field,a=e.value,n=e.ref;return Object(p.jsx)(v.a,{inputRef:n,className:r()("react-select",{"is-invalid":null===(s=q.invoice_items)||void 0===s||null===(t=s[i])||void 0===t?void 0:t.item_id}),classNamePrefix:"select",options:Y,value:Y.find((function(e){return e.value===a})),onChange:function(e){return c.onChange(e.value)}})}}),(null===(s=q.invoice_items)||void 0===s||null===(c=s[i])||void 0===c?void 0:c.item_id)&&Object(p.jsx)(h.I,{className:"text-danger",children:null===(a=q.invoice_items)||void 0===a||null===(n=a[i])||void 0===n||null===(l=n.item_id)||void 0===l?void 0:l.message})]}),Object(p.jsxs)(h.B,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(p.jsx)(h.u,{className:"col-title mb-md-2 mb-0",children:"SAC Code"}),Object(p.jsx)(O.a,{name:"invoice_items.".concat(i,".sac_code"),control:z,render:function(e){var s,c,a=e.field;return Object(p.jsx)(h.L,Object(t.a)({type:"text",invalid:(null===(s=q.invoice_items)||void 0===s||null===(c=s[i])||void 0===c?void 0:c.sac_code)&&!0},a))}}),(null===(d=q.invoice_items)||void 0===d||null===(o=d[i])||void 0===o?void 0:o.sac_code)&&Object(p.jsx)(h.I,{children:null===(j=q.invoice_items)||void 0===j||null===(m=j[i])||void 0===m||null===(u=m.sac_code)||void 0===u?void 0:u.message})]}),Object(p.jsxs)(h.B,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(p.jsx)(h.u,{className:"col-title mb-md-2 mb-0",children:"Price"}),Object(p.jsx)(O.a,{name:"invoice_items.".concat(i,".price"),control:z,render:function(e){var s,c,a=e.field;return Object(p.jsx)(h.L,Object(t.a)({type:"number",invalid:(null===(s=q.invoice_items)||void 0===s||null===(c=s[i])||void 0===c?void 0:c.price)&&!0},a))}}),(null===(x=q.invoice_items)||void 0===x||null===(f=x[i])||void 0===f?void 0:f.price)&&Object(p.jsx)(h.I,{children:null===(g=q.invoice_items)||void 0===g||null===(N=g[i])||void 0===N||null===(_=N.price)||void 0===_?void 0:_.message})]}),Object(p.jsxs)(h.B,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(p.jsx)(h.u,{className:"col-title mb-md-50 mb-0",children:"Tax Rate"}),Object(p.jsx)(O.a,{control:z,name:"invoice_items.".concat(i,".tax_group_id"),rules:{required:!0},render:function(e){var s,t,c=e.field,a=e.value,n=e.ref;return Object(p.jsx)(v.a,{inputRef:n,className:r()("react-select",{"is-invalid":null===(s=q.invoice_items)||void 0===s||null===(t=s[i])||void 0===t?void 0:t.tax_group_id}),classNamePrefix:"select",options:$,value:$.find((function(e){return e.value===a})),onChange:function(e){return c.onChange(e.value)}})}}),(null===(y=q.invoice_items)||void 0===y||null===(C=y[i])||void 0===C?void 0:C.tax_group_id)&&Object(p.jsx)(h.I,{className:"text-danger",children:null===(S=q.invoice_items)||void 0===S||null===(P=S[i])||void 0===P||null===(k=P.tax_group_id)||void 0===k?void 0:k.message})]}),Object(p.jsx)(h.B,{className:"my-lg-0 mt-2",lg:"1",sm:"12",children:Object(p.jsx)(h.u,{className:"col-title mb-md-50 mb-0",children:"Amount"})})]}),Object(p.jsx)("div",{className:"d-lg-flex justify-content-center border-start invoice-product-actions py-50 px-25",children:Object(p.jsx)(b.a,{size:18,className:"cursor-pointer",onClick:function(){re(i)}})})]})})},e.id)})),Object(p.jsx)(h.jb,{className:"mt-1",children:Object(p.jsx)(h.B,{sm:"12",className:"px-0",children:Object(p.jsxs)(h.i,{color:"primary",size:"sm",className:"btn-add-new",onClick:function(){return de()},children:[Object(p.jsx)(u.a,{size:14,className:"me-25"})," ",Object(p.jsx)("span",{className:"align-middle",children:"Add Item"})]})})})]})]}),Object(p.jsx)(h.l,{children:Object(p.jsx)(h.m,{children:Object(p.jsxs)("div",{className:"modal-footer border-0",children:[Object(p.jsx)(h.i,{className:"add-new-user",outline:!0,color:"warning",tag:n.b,to:"/task/list",children:"Cancel"}),Object(p.jsx)(h.i,{color:"primary",type:"submit",children:"Save"})]})})})]})};i.default=function(){return Object(p.jsx)("div",{className:"invoice-add-wrapper",children:Object(p.jsx)(h.jb,{className:"invoice-add",children:Object(p.jsx)(h.B,{xl:12,md:12,sm:12,children:Object(p.jsx)(g,{})})})})}},499:function(e,i,s){},503:function(e,i,s){},514:function(e,i,s){}}]);
//# sourceMappingURL=81.46a46711.chunk.js.map
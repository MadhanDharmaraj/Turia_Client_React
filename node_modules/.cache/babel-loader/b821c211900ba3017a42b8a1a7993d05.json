{"ast":null,"code":"// ** Redux Imports\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit'; // ** Axios Imports\n\nimport axios from 'axios';\nexport const fetchEvents = createAsyncThunk('appCalendar/fetchEvents', async calendars => {\n  const response = await axios.get('/apps/calendar/events', {\n    calendars\n  });\n  return response.data;\n});\nexport const addEvent = createAsyncThunk('appCalendar/addEvent', async (event, _ref) => {\n  let {\n    dispatch,\n    getState\n  } = _ref;\n  await axios.post('/apps/calendar/add-event', {\n    event\n  });\n  await dispatch(fetchEvents(getState().calendar.selectedCalendars));\n  return event;\n});\nexport const updateEvent = createAsyncThunk('appCalendar/updateEvent', async (event, _ref2) => {\n  let {\n    dispatch,\n    getState\n  } = _ref2;\n  await axios.post('/apps/calendar/update-event', {\n    event\n  });\n  await dispatch(fetchEvents(getState().calendar.selectedCalendars));\n  return event;\n});\nexport const updateFilter = createAsyncThunk('appCalendar/updateFilter', async (filter, _ref3) => {\n  let {\n    dispatch,\n    getState\n  } = _ref3;\n\n  if (getState().calendar.selectedCalendars.includes(filter)) {\n    await dispatch(fetchEvents(getState().calendar.selectedCalendars.filter(i => i !== filter)));\n  } else {\n    await dispatch(fetchEvents([...getState().calendar.selectedCalendars, filter]));\n  }\n\n  return filter;\n});\nexport const updateAllFilters = createAsyncThunk('appCalendar/updateAllFilters', async (value, _ref4) => {\n  let {\n    dispatch\n  } = _ref4;\n\n  if (value === true) {\n    await dispatch(fetchEvents(['Personal', 'Business', 'Family', 'Holiday', 'ETC']));\n  } else {\n    await dispatch(fetchEvents([]));\n  }\n\n  return value;\n});\nexport const removeEvent = createAsyncThunk('appCalendar/removeEvent', async id => {\n  await axios.delete('/apps/calendar/remove-event', {\n    id\n  });\n  return id;\n});\nexport const appCalendarSlice = createSlice({\n  name: 'appCalendar',\n  initialState: {\n    events: [],\n    selectedEvent: {},\n    selectedCalendars: ['Personal', 'Business', 'Family', 'Holiday', 'ETC']\n  },\n  reducers: {\n    selectEvent: (state, action) => {\n      state.selectedEvent = action.payload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchEvents.fulfilled, (state, action) => {\n      state.events = action.payload;\n    }).addCase(updateFilter.fulfilled, (state, action) => {\n      if (state.selectedCalendars.includes(action.payload)) {\n        state.selectedCalendars.splice(state.selectedCalendars.indexOf(action.payload), 1);\n      } else {\n        state.selectedCalendars.push(action.payload);\n      }\n    }).addCase(updateAllFilters.fulfilled, (state, action) => {\n      const value = action.payload;\n      let selected = [];\n\n      if (value === true) {\n        selected = ['Personal', 'Business', 'Family', 'Holiday', 'ETC'];\n      } else {\n        selected = [];\n      }\n\n      state.selectedCalendars = selected;\n    });\n  }\n});\nexport const {\n  selectEvent\n} = appCalendarSlice.actions;\nexport default appCalendarSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","fetchEvents","calendars","response","get","data","addEvent","event","dispatch","getState","post","calendar","selectedCalendars","updateEvent","updateFilter","filter","includes","i","updateAllFilters","value","removeEvent","id","delete","appCalendarSlice","name","initialState","events","selectedEvent","reducers","selectEvent","state","action","payload","extraReducers","builder","addCase","fulfilled","splice","indexOf","push","selected","actions","reducer"],"sources":["/var/www/html/Turia_Client_React/src/views/apps/calendar/store/index.js"],"sourcesContent":["// ** Redux Imports\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\n\n// ** Axios Imports\nimport axios from 'axios'\n\nexport const fetchEvents = createAsyncThunk('appCalendar/fetchEvents', async calendars => {\n  const response = await axios.get('/apps/calendar/events', { calendars })\n  return response.data\n})\n\nexport const addEvent = createAsyncThunk('appCalendar/addEvent', async (event, { dispatch, getState }) => {\n  await axios.post('/apps/calendar/add-event', { event })\n  await dispatch(fetchEvents(getState().calendar.selectedCalendars))\n  return event\n})\n\nexport const updateEvent = createAsyncThunk('appCalendar/updateEvent', async (event, { dispatch, getState }) => {\n  await axios.post('/apps/calendar/update-event', { event })\n  await dispatch(fetchEvents(getState().calendar.selectedCalendars))\n  return event\n})\n\nexport const updateFilter = createAsyncThunk('appCalendar/updateFilter', async (filter, { dispatch, getState }) => {\n  if (getState().calendar.selectedCalendars.includes(filter)) {\n    await dispatch(fetchEvents(getState().calendar.selectedCalendars.filter(i => i !== filter)))\n  } else {\n    await dispatch(fetchEvents([...getState().calendar.selectedCalendars, filter]))\n  }\n  return filter\n})\n\nexport const updateAllFilters = createAsyncThunk('appCalendar/updateAllFilters', async (value, { dispatch }) => {\n  if (value === true) {\n    await dispatch(fetchEvents(['Personal', 'Business', 'Family', 'Holiday', 'ETC']))\n  } else {\n    await dispatch(fetchEvents([]))\n  }\n  return value\n})\n\nexport const removeEvent = createAsyncThunk('appCalendar/removeEvent', async id => {\n  await axios.delete('/apps/calendar/remove-event', { id })\n  return id\n})\n\nexport const appCalendarSlice = createSlice({\n  name: 'appCalendar',\n  initialState: {\n    events: [],\n    selectedEvent: {},\n    selectedCalendars: ['Personal', 'Business', 'Family', 'Holiday', 'ETC']\n  },\n  reducers: {\n    selectEvent: (state, action) => {\n      state.selectedEvent = action.payload\n    }\n  },\n  extraReducers: builder => {\n    builder\n      .addCase(fetchEvents.fulfilled, (state, action) => {\n        state.events = action.payload\n      })\n      .addCase(updateFilter.fulfilled, (state, action) => {\n        if (state.selectedCalendars.includes(action.payload)) {\n          state.selectedCalendars.splice(state.selectedCalendars.indexOf(action.payload), 1)\n        } else {\n          state.selectedCalendars.push(action.payload)\n        }\n      })\n      .addCase(updateAllFilters.fulfilled, (state, action) => {\n        const value = action.payload\n        let selected = []\n        if (value === true) {\n          selected = ['Personal', 'Business', 'Family', 'Holiday', 'ETC']\n        } else {\n          selected = []\n        }\n        state.selectedCalendars = selected\n      })\n  }\n})\n\nexport const { selectEvent } = appCalendarSlice.actions\n\nexport default appCalendarSlice.reducer\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
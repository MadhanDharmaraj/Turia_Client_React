{"ast":null,"code":"// ** Redux Imports\nimport{createSlice}from'@reduxjs/toolkit';// ** UseJWT import to get config\nimport useJwt from'@src/auth/jwt/useJwt';var config=useJwt.jwtConfig;var initialUser=function initialUser(){var item=window.localStorage.getItem('userData');//** Parse stored json or if none return initialValue\nreturn item?JSON.parse(item):{};};export var authSlice=createSlice({name:'authentication',initialState:{userData:initialUser()},reducers:{handleLogin:function handleLogin(state,action){state.userData=action.payload;state[config.storageTokenKeyName]=action.payload[config.storageTokenKeyName];state[config.storageRefreshTokenKeyName]=action.payload[config.storageRefreshTokenKeyName];localStorage.setItem('userData',JSON.stringify(action.payload));localStorage.setItem(config.storageTokenKeyName,JSON.stringify(action.payload.accessToken));localStorage.setItem(config.storageRefreshTokenKeyName,JSON.stringify(action.payload.refreshToken));},handleLogout:function handleLogout(state){state.userData={};state[config.storageTokenKeyName]=null;state[config.storageRefreshTokenKeyName]=null;// ** Remove user, accessToken & refreshToken from localStorage\nlocalStorage.removeItem('userData');localStorage.removeItem(config.storageTokenKeyName);localStorage.removeItem(config.storageRefreshTokenKeyName);}}});var _authSlice$actions=authSlice.actions,handleLogin=_authSlice$actions.handleLogin,handleLogout=_authSlice$actions.handleLogout;export{handleLogin,handleLogout};export default authSlice.reducer;","map":{"version":3,"names":["createSlice","useJwt","config","jwtConfig","initialUser","item","window","localStorage","getItem","JSON","parse","authSlice","name","initialState","userData","reducers","handleLogin","state","action","payload","storageTokenKeyName","storageRefreshTokenKeyName","setItem","stringify","accessToken","refreshToken","handleLogout","removeItem","actions","reducer"],"sources":["/var/www/html/Turia_Client_React/src/redux/authentication.js"],"sourcesContent":["// ** Redux Imports\nimport { createSlice } from '@reduxjs/toolkit'\n\n// ** UseJWT import to get config\nimport useJwt from '@src/auth/jwt/useJwt'\n\nconst config = useJwt.jwtConfig\n\nconst initialUser = () => {\n  const item = window.localStorage.getItem('userData')\n  //** Parse stored json or if none return initialValue\n  return item ? JSON.parse(item) : {}\n}\n\nexport const authSlice = createSlice({\n  name: 'authentication',\n  initialState: {\n    userData: initialUser()\n  },\n  reducers: {\n    handleLogin: (state, action) => {\n      state.userData = action.payload\n      state[config.storageTokenKeyName] = action.payload[config.storageTokenKeyName]\n      state[config.storageRefreshTokenKeyName] = action.payload[config.storageRefreshTokenKeyName]\n      localStorage.setItem('userData', JSON.stringify(action.payload))\n      localStorage.setItem(config.storageTokenKeyName, JSON.stringify(action.payload.accessToken))\n      localStorage.setItem(config.storageRefreshTokenKeyName, JSON.stringify(action.payload.refreshToken))\n    },\n    handleLogout: state => {\n      state.userData = {}\n      state[config.storageTokenKeyName] = null\n      state[config.storageRefreshTokenKeyName] = null\n      // ** Remove user, accessToken & refreshToken from localStorage\n      localStorage.removeItem('userData')\n      localStorage.removeItem(config.storageTokenKeyName)\n      localStorage.removeItem(config.storageRefreshTokenKeyName)\n    }\n  }\n})\n\nexport const { handleLogin, handleLogout } = authSlice.actions\n\nexport default authSlice.reducer\n"],"mappings":"AAAA;AACA,OAASA,WAAT,KAA4B,kBAA5B,CAEA;AACA,MAAOC,OAAP,KAAmB,sBAAnB,CAEA,GAAMC,OAAM,CAAGD,MAAM,CAACE,SAAtB,CAEA,GAAMC,YAAW,CAAG,QAAdA,YAAc,EAAM,CACxB,GAAMC,KAAI,CAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,UAA5B,CAAb,CACA;AACA,MAAOH,KAAI,CAAGI,IAAI,CAACC,KAAL,CAAWL,IAAX,CAAH,CAAsB,EAAjC,CACD,CAJD,CAMA,MAAO,IAAMM,UAAS,CAAGX,WAAW,CAAC,CACnCY,IAAI,CAAE,gBAD6B,CAEnCC,YAAY,CAAE,CACZC,QAAQ,CAAEV,WAAW,EADT,CAFqB,CAKnCW,QAAQ,CAAE,CACRC,WAAW,CAAE,qBAACC,KAAD,CAAQC,MAAR,CAAmB,CAC9BD,KAAK,CAACH,QAAN,CAAiBI,MAAM,CAACC,OAAxB,CACAF,KAAK,CAACf,MAAM,CAACkB,mBAAR,CAAL,CAAoCF,MAAM,CAACC,OAAP,CAAejB,MAAM,CAACkB,mBAAtB,CAApC,CACAH,KAAK,CAACf,MAAM,CAACmB,0BAAR,CAAL,CAA2CH,MAAM,CAACC,OAAP,CAAejB,MAAM,CAACmB,0BAAtB,CAA3C,CACAd,YAAY,CAACe,OAAb,CAAqB,UAArB,CAAiCb,IAAI,CAACc,SAAL,CAAeL,MAAM,CAACC,OAAtB,CAAjC,EACAZ,YAAY,CAACe,OAAb,CAAqBpB,MAAM,CAACkB,mBAA5B,CAAiDX,IAAI,CAACc,SAAL,CAAeL,MAAM,CAACC,OAAP,CAAeK,WAA9B,CAAjD,EACAjB,YAAY,CAACe,OAAb,CAAqBpB,MAAM,CAACmB,0BAA5B,CAAwDZ,IAAI,CAACc,SAAL,CAAeL,MAAM,CAACC,OAAP,CAAeM,YAA9B,CAAxD,EACD,CARO,CASRC,YAAY,CAAE,sBAAAT,KAAK,CAAI,CACrBA,KAAK,CAACH,QAAN,CAAiB,EAAjB,CACAG,KAAK,CAACf,MAAM,CAACkB,mBAAR,CAAL,CAAoC,IAApC,CACAH,KAAK,CAACf,MAAM,CAACmB,0BAAR,CAAL,CAA2C,IAA3C,CACA;AACAd,YAAY,CAACoB,UAAb,CAAwB,UAAxB,EACApB,YAAY,CAACoB,UAAb,CAAwBzB,MAAM,CAACkB,mBAA/B,EACAb,YAAY,CAACoB,UAAb,CAAwBzB,MAAM,CAACmB,0BAA/B,EACD,CAjBO,CALyB,CAAD,CAA7B,CA0BA,uBAAsCV,SAAS,CAACiB,OAAhD,CAAQZ,WAAR,oBAAQA,WAAR,CAAqBU,YAArB,oBAAqBA,YAArB,C,iCAEP,cAAef,UAAS,CAACkB,OAAzB"},"metadata":{},"sourceType":"module"}
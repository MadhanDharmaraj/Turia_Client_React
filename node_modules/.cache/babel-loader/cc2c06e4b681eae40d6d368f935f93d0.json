{"ast":null,"code":"import _asyncToGenerator from\"/var/www/html/Turia_Client_React/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/var/www/html/Turia_Client_React/node_modules/@babel/runtime/regenerator/index.js\";// ** Redux Imports\nimport{createSlice,createAsyncThunk}from'@reduxjs/toolkit';// ** Axios Imports\nimport axios from'axios';export var getBookmarks=createAsyncThunk('layout/getBookmarks',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/bookmarks/data');case 2:response=_context.sent;return _context.abrupt(\"return\",{data:response.data.suggestions,bookmarks:response.data.bookmarks});case 4:case\"end\":return _context.stop();}}},_callee);})));export var updateBookmarked=createAsyncThunk('layout/updateBookmarked',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('/api/bookmarks/update',{id:id});case 2:return _context2.abrupt(\"return\",id);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}());export var layoutSlice=createSlice({name:'layout',initialState:{query:'',bookmarks:[],suggestions:[]},reducers:{handleSearchQuery:function handleSearchQuery(state,action){state.query=action.payload;}},extraReducers:function extraReducers(builder){builder.addCase(getBookmarks.fulfilled,function(state,action){state.suggestions=action.payload.data;state.bookmarks=action.payload.bookmarks;}).addCase(updateBookmarked.fulfilled,function(state,action){var objectToUpdate;// ** find & update object\nstate.suggestions.find(function(item){if(item.id===action.payload){item.isBookmarked=!item.isBookmarked;objectToUpdate=item;}});// ** Get index to add or remove bookmark from array\nvar bookmarkIndex=state.bookmarks.findIndex(function(x){return x.id===action.payload;});if(bookmarkIndex===-1){state.bookmarks.push(objectToUpdate);}else{state.bookmarks.splice(bookmarkIndex,1);}});}});var handleSearchQuery=layoutSlice.actions.handleSearchQuery;export{handleSearchQuery};export default layoutSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","getBookmarks","get","response","data","suggestions","bookmarks","updateBookmarked","id","post","layoutSlice","name","initialState","query","reducers","handleSearchQuery","state","action","payload","extraReducers","builder","addCase","fulfilled","objectToUpdate","find","item","isBookmarked","bookmarkIndex","findIndex","x","push","splice","actions","reducer"],"sources":["/var/www/html/Turia_Client_React/src/redux/navbar.js"],"sourcesContent":["// ** Redux Imports\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\n\n// ** Axios Imports\nimport axios from 'axios'\n\nexport const getBookmarks = createAsyncThunk('layout/getBookmarks', async () => {\n  const response = await axios.get('/api/bookmarks/data')\n  return {\n    data: response.data.suggestions,\n    bookmarks: response.data.bookmarks\n  }\n})\n\nexport const updateBookmarked = createAsyncThunk('layout/updateBookmarked', async id => {\n  await axios.post('/api/bookmarks/update', { id })\n  return id\n})\n\nexport const layoutSlice = createSlice({\n  name: 'layout',\n  initialState: {\n    query: '',\n    bookmarks: [],\n    suggestions: []\n  },\n  reducers: {\n    handleSearchQuery: (state, action) => {\n      state.query = action.payload\n    }\n  },\n  extraReducers: builder => {\n    builder\n      .addCase(getBookmarks.fulfilled, (state, action) => {\n        state.suggestions = action.payload.data\n        state.bookmarks = action.payload.bookmarks\n      })\n      .addCase(updateBookmarked.fulfilled, (state, action) => {\n        let objectToUpdate\n\n        // ** find & update object\n        state.suggestions.find(item => {\n          if (item.id === action.payload) {\n            item.isBookmarked = !item.isBookmarked\n            objectToUpdate = item\n          }\n        })\n\n        // ** Get index to add or remove bookmark from array\n        const bookmarkIndex = state.bookmarks.findIndex(x => x.id === action.payload)\n\n        if (bookmarkIndex === -1) {\n          state.bookmarks.push(objectToUpdate)\n        } else {\n          state.bookmarks.splice(bookmarkIndex, 1)\n        }\n      })\n  }\n})\n\nexport const { handleSearchQuery } = layoutSlice.actions\n\nexport default layoutSlice.reducer\n"],"mappings":"+OAAA;AACA,OAASA,WAAT,CAAsBC,gBAAtB,KAA8C,kBAA9C,CAEA;AACA,MAAOC,MAAP,KAAkB,OAAlB,CAEA,MAAO,IAAMC,aAAY,CAAGF,gBAAgB,CAAC,qBAAD,sEAAwB,sKAC3CC,MAAK,CAACE,GAAN,CAAU,qBAAV,CAD2C,QAC5DC,QAD4D,+CAE3D,CACLC,IAAI,CAAED,QAAQ,CAACC,IAAT,CAAcC,WADf,CAELC,SAAS,CAAEH,QAAQ,CAACC,IAAT,CAAcE,SAFpB,CAF2D,wDAAxB,GAArC,CAQP,MAAO,IAAMC,iBAAgB,CAAGR,gBAAgB,CAAC,yBAAD,2FAA4B,kBAAMS,EAAN,6IACpER,MAAK,CAACS,IAAN,CAAW,uBAAX,CAAoC,CAAED,EAAE,CAAFA,EAAF,CAApC,CADoE,yCAEnEA,EAFmE,0DAA5B,gEAAzC,CAKP,MAAO,IAAME,YAAW,CAAGZ,WAAW,CAAC,CACrCa,IAAI,CAAE,QAD+B,CAErCC,YAAY,CAAE,CACZC,KAAK,CAAE,EADK,CAEZP,SAAS,CAAE,EAFC,CAGZD,WAAW,CAAE,EAHD,CAFuB,CAOrCS,QAAQ,CAAE,CACRC,iBAAiB,CAAE,2BAACC,KAAD,CAAQC,MAAR,CAAmB,CACpCD,KAAK,CAACH,KAAN,CAAcI,MAAM,CAACC,OAArB,CACD,CAHO,CAP2B,CAYrCC,aAAa,CAAE,uBAAAC,OAAO,CAAI,CACxBA,OAAO,CACJC,OADH,CACWpB,YAAY,CAACqB,SADxB,CACmC,SAACN,KAAD,CAAQC,MAAR,CAAmB,CAClDD,KAAK,CAACX,WAAN,CAAoBY,MAAM,CAACC,OAAP,CAAed,IAAnC,CACAY,KAAK,CAACV,SAAN,CAAkBW,MAAM,CAACC,OAAP,CAAeZ,SAAjC,CACD,CAJH,EAKGe,OALH,CAKWd,gBAAgB,CAACe,SAL5B,CAKuC,SAACN,KAAD,CAAQC,MAAR,CAAmB,CACtD,GAAIM,eAAJ,CAEA;AACAP,KAAK,CAACX,WAAN,CAAkBmB,IAAlB,CAAuB,SAAAC,IAAI,CAAI,CAC7B,GAAIA,IAAI,CAACjB,EAAL,GAAYS,MAAM,CAACC,OAAvB,CAAgC,CAC9BO,IAAI,CAACC,YAAL,CAAoB,CAACD,IAAI,CAACC,YAA1B,CACAH,cAAc,CAAGE,IAAjB,CACD,CACF,CALD,EAOA;AACA,GAAME,cAAa,CAAGX,KAAK,CAACV,SAAN,CAAgBsB,SAAhB,CAA0B,SAAAC,CAAC,QAAIA,EAAC,CAACrB,EAAF,GAASS,MAAM,CAACC,OAApB,EAA3B,CAAtB,CAEA,GAAIS,aAAa,GAAK,CAAC,CAAvB,CAA0B,CACxBX,KAAK,CAACV,SAAN,CAAgBwB,IAAhB,CAAqBP,cAArB,EACD,CAFD,IAEO,CACLP,KAAK,CAACV,SAAN,CAAgByB,MAAhB,CAAuBJ,aAAvB,CAAsC,CAAtC,EACD,CACF,CAxBH,EAyBD,CAtCoC,CAAD,CAA/B,CAyCA,GAAQZ,kBAAR,CAA8BL,WAAW,CAACsB,OAA1C,CAAQjB,iBAAR,C,0BAEP,cAAeL,YAAW,CAACuB,OAA3B"},"metadata":{},"sourceType":"module"}
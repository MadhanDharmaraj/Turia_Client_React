{"ast":null,"code":"var _jsxFileName = \"/var/www/html/Turia_Client_React/src/@core/components/routes/PrivateRoute.js\",\n    _s = $RefreshSig$();\n\n// ** React Imports\nimport { Navigate } from 'react-router-dom';\nimport { useContext, Suspense } from 'react'; // ** Context Imports\n\nimport { AbilityContext } from '@src/utility/context/Can';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PrivateRoute = _ref => {\n  _s();\n\n  let {\n    children,\n    route\n  } = _ref;\n  // ** Hooks & Vars\n  const ability = useContext(AbilityContext);\n  const user = JSON.parse(localStorage.getItem('userData'));\n\n  if (route) {\n    let action = null;\n    let resource = null;\n    let restrictedRoute = false;\n\n    if (route.meta) {\n      action = route.meta.action;\n      resource = route.meta.resource;\n      restrictedRoute = route.meta.restricted;\n    }\n\n    if (!user) {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (user && restrictedRoute) {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (user && restrictedRoute && user.role === 'client') {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/access-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (user && !ability.can(action || 'read', resource)) {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/misc/not-authorized\",\n        replace: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 14\n      }, this);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Suspense, {\n    fallback: null,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 10\n  }, this);\n};\n\n_s(PrivateRoute, \"Mgx70MHFOjWkgzuKcjn1pYPEx8o=\");\n\n_c = PrivateRoute;\nexport default PrivateRoute;\n\nvar _c;\n\n$RefreshReg$(_c, \"PrivateRoute\");","map":{"version":3,"names":["Navigate","useContext","Suspense","AbilityContext","PrivateRoute","children","route","ability","user","JSON","parse","localStorage","getItem","action","resource","restrictedRoute","meta","restricted","role","can"],"sources":["/var/www/html/Turia_Client_React/src/@core/components/routes/PrivateRoute.js"],"sourcesContent":["// ** React Imports\nimport { Navigate } from 'react-router-dom'\nimport { useContext, Suspense } from 'react'\n\n// ** Context Imports\nimport { AbilityContext } from '@src/utility/context/Can'\n\nconst PrivateRoute = ({ children, route }) => {\n  // ** Hooks & Vars\n  const ability = useContext(AbilityContext)\n  const user = JSON.parse(localStorage.getItem('userData'))\n\n  if (route) {\n    let action = null\n    let resource = null\n    let restrictedRoute = false\n\n    if (route.meta) {\n      action = route.meta.action\n      resource = route.meta.resource\n      restrictedRoute = route.meta.restricted\n    }\n    if (!user) {\n      return <Navigate to='/login' />\n    }\n    if (user && restrictedRoute) {\n      return <Navigate to='/' />\n    }\n    if (user && restrictedRoute && user.role === 'client') {\n      return <Navigate to='/access-control' />\n    }\n    if (user && !ability.can(action || 'read', resource)) {\n      return <Navigate to='/misc/not-authorized' replace />\n    }\n  }\n\n  return <Suspense fallback={null}>{children}</Suspense>\n}\n\nexport default PrivateRoute\n"],"mappings":";;;AAAA;AACA,SAASA,QAAT,QAAyB,kBAAzB;AACA,SAASC,UAAT,EAAqBC,QAArB,QAAqC,OAArC,C,CAEA;;AACA,SAASC,cAAT,QAA+B,0BAA/B;;;AAEA,MAAMC,YAAY,GAAG,QAAyB;EAAA;;EAAA,IAAxB;IAAEC,QAAF;IAAYC;EAAZ,CAAwB;EAC5C;EACA,MAAMC,OAAO,GAAGN,UAAU,CAACE,cAAD,CAA1B;EACA,MAAMK,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAAb;;EAEA,IAAIN,KAAJ,EAAW;IACT,IAAIO,MAAM,GAAG,IAAb;IACA,IAAIC,QAAQ,GAAG,IAAf;IACA,IAAIC,eAAe,GAAG,KAAtB;;IAEA,IAAIT,KAAK,CAACU,IAAV,EAAgB;MACdH,MAAM,GAAGP,KAAK,CAACU,IAAN,CAAWH,MAApB;MACAC,QAAQ,GAAGR,KAAK,CAACU,IAAN,CAAWF,QAAtB;MACAC,eAAe,GAAGT,KAAK,CAACU,IAAN,CAAWC,UAA7B;IACD;;IACD,IAAI,CAACT,IAAL,EAAW;MACT,oBAAO,QAAC,QAAD;QAAU,EAAE,EAAC;MAAb;QAAA;QAAA;QAAA;MAAA,QAAP;IACD;;IACD,IAAIA,IAAI,IAAIO,eAAZ,EAA6B;MAC3B,oBAAO,QAAC,QAAD;QAAU,EAAE,EAAC;MAAb;QAAA;QAAA;QAAA;MAAA,QAAP;IACD;;IACD,IAAIP,IAAI,IAAIO,eAAR,IAA2BP,IAAI,CAACU,IAAL,KAAc,QAA7C,EAAuD;MACrD,oBAAO,QAAC,QAAD;QAAU,EAAE,EAAC;MAAb;QAAA;QAAA;QAAA;MAAA,QAAP;IACD;;IACD,IAAIV,IAAI,IAAI,CAACD,OAAO,CAACY,GAAR,CAAYN,MAAM,IAAI,MAAtB,EAA8BC,QAA9B,CAAb,EAAsD;MACpD,oBAAO,QAAC,QAAD;QAAU,EAAE,EAAC,sBAAb;QAAoC,OAAO;MAA3C;QAAA;QAAA;QAAA;MAAA,QAAP;IACD;EACF;;EAED,oBAAO,QAAC,QAAD;IAAU,QAAQ,EAAE,IAApB;IAAA,UAA2BT;EAA3B;IAAA;IAAA;IAAA;EAAA,QAAP;AACD,CA9BD;;GAAMD,Y;;KAAAA,Y;AAgCN,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}
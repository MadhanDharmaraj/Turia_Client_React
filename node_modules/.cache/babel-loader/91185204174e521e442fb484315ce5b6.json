{"ast":null,"code":"import _defineProperty from\"/var/www/html/Turia_Client_React/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"/var/www/html/Turia_Client_React/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// ** React Imports\nimport{Fragment,useState,useEffect,memo}from'react';// ** Table Columns\nimport{serverSideColumns}from'../data';// ** Store & Actions\nimport{getData}from'../store';import{useSelector,useDispatch}from'react-redux';// ** Third Party Components\nimport ReactPaginate from'react-paginate';import{ChevronDown}from'react-feather';import DataTable from'react-data-table-component';// ** Reactstrap Imports\nimport{Card,CardHeader,CardTitle,Input,Label,Row,Col}from'reactstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DataTableServerSide=function DataTableServerSide(){// ** Store Vars\nvar dispatch=useDispatch();var store=useSelector(function(state){return state.dataTables;});// ** States\nvar _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var _useState3=useState(7),_useState4=_slicedToArray(_useState3,2),rowsPerPage=_useState4[0],setRowsPerPage=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),searchValue=_useState6[0],setSearchValue=_useState6[1];// ** Get data on mount\nuseEffect(function(){dispatch(getData({page:currentPage,perPage:rowsPerPage,q:searchValue}));},[dispatch]);// ** Function to handle filter\nvar handleFilter=function handleFilter(e){setSearchValue(e.target.value);dispatch(getData({page:currentPage,perPage:rowsPerPage,q:e.target.value}));};// ** Function to handle Pagination and get data\nvar handlePagination=function handlePagination(page){dispatch(getData({page:page.selected+1,perPage:rowsPerPage,q:searchValue}));setCurrentPage(page.selected+1);};// ** Function to handle per page\nvar handlePerPage=function handlePerPage(e){dispatch(getData({page:currentPage,perPage:parseInt(e.target.value),q:searchValue}));setRowsPerPage(parseInt(e.target.value));};// ** Custom Pagination\nvar CustomPagination=function CustomPagination(){var _jsx2;var count=Math.ceil(store.total/rowsPerPage);return/*#__PURE__*/_jsx(ReactPaginate,(_jsx2={previousLabel:'',nextLabel:'',breakLabel:\"...\",pageCount:Math.ceil(count)||1,marginPagesDisplayed:2,pageRangeDisplayed:2,activeClassName:\"active\",forcePage:currentPage!==0?currentPage-1:0,onPageChange:function onPageChange(page){return handlePagination(page);}},_defineProperty(_jsx2,\"activeClassName\",\"active\"),_defineProperty(_jsx2,\"pageClassName\",\"page-item\"),_defineProperty(_jsx2,\"breakClassName\",\"page-item\"),_defineProperty(_jsx2,\"nextLinkClassName\",\"page-link\"),_defineProperty(_jsx2,\"pageLinkClassName\",\"page-link\"),_defineProperty(_jsx2,\"breakLinkClassName\",\"page-link\"),_defineProperty(_jsx2,\"previousLinkClassName\",\"page-link\"),_defineProperty(_jsx2,\"nextClassName\",\"page-item next-item\"),_defineProperty(_jsx2,\"previousClassName\",\"page-item prev-item\"),_defineProperty(_jsx2,\"containerClassName\",'pagination react-paginate separated-pagination pagination-sm justify-content-end pe-1 mt-1'),_jsx2));};// ** Table data to render\nvar dataToRender=function dataToRender(){var filters={q:searchValue};var isFiltered=Object.keys(filters).some(function(k){return filters[k].length>0;});if(store.data.length>0){return store.data;}else if(store.data.length===0&&isFiltered){return[];}else{return store.allData.slice(0,rowsPerPage);}};return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{className:\"border-bottom\",children:/*#__PURE__*/_jsx(CardTitle,{tag:\"h4\",children:\"Server Side\"})}),/*#__PURE__*/_jsxs(Row,{className:\"mx-0 mt-1 mb-50\",children:[/*#__PURE__*/_jsx(Col,{sm:\"6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(Label,{for:\"sort-select\",children:\"show\"}),/*#__PURE__*/_jsxs(Input,{className:\"dataTable-select\",type:\"select\",id:\"sort-select\",value:rowsPerPage,onChange:function onChange(e){return handlePerPage(e);},children:[/*#__PURE__*/_jsx(\"option\",{value:7,children:\"7\"}),/*#__PURE__*/_jsx(\"option\",{value:10,children:\"10\"}),/*#__PURE__*/_jsx(\"option\",{value:25,children:\"25\"}),/*#__PURE__*/_jsx(\"option\",{value:50,children:\"50\"}),/*#__PURE__*/_jsx(\"option\",{value:75,children:\"75\"}),/*#__PURE__*/_jsx(\"option\",{value:100,children:\"100\"})]}),/*#__PURE__*/_jsx(Label,{for:\"sort-select\",children:\"entries\"})]})}),/*#__PURE__*/_jsxs(Col,{className:\"d-flex align-items-center justify-content-sm-end mt-sm-0 mt-1\",sm:\"6\",children:[/*#__PURE__*/_jsx(Label,{className:\"me-1\",for:\"search-input\",children:\"Search\"}),/*#__PURE__*/_jsx(Input,{className:\"dataTable-filter\",type:\"text\",bsSize:\"sm\",id:\"search-input\",value:searchValue,onChange:handleFilter})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"react-dataTable\",children:/*#__PURE__*/_jsx(DataTable,{noHeader:true,pagination:true,paginationServer:true,className:\"react-dataTable\",columns:serverSideColumns,sortIcon:/*#__PURE__*/_jsx(ChevronDown,{size:10}),paginationComponent:CustomPagination,data:dataToRender()})})]})});};export default/*#__PURE__*/memo(DataTableServerSide);","map":{"version":3,"names":["Fragment","useState","useEffect","memo","serverSideColumns","getData","useSelector","useDispatch","ReactPaginate","ChevronDown","DataTable","Card","CardHeader","CardTitle","Input","Label","Row","Col","DataTableServerSide","dispatch","store","state","dataTables","currentPage","setCurrentPage","rowsPerPage","setRowsPerPage","searchValue","setSearchValue","page","perPage","q","handleFilter","e","target","value","handlePagination","selected","handlePerPage","parseInt","CustomPagination","count","Math","ceil","total","dataToRender","filters","isFiltered","Object","keys","some","k","length","data","allData","slice"],"sources":["/var/www/html/Turia_Client_React/src/views/tables/data-tables/advance/TableServerSide.js"],"sourcesContent":["// ** React Imports\nimport { Fragment, useState, useEffect, memo } from 'react'\n\n// ** Table Columns\nimport { serverSideColumns } from '../data'\n\n// ** Store & Actions\nimport { getData } from '../store'\nimport { useSelector, useDispatch } from 'react-redux'\n\n// ** Third Party Components\nimport ReactPaginate from 'react-paginate'\nimport { ChevronDown } from 'react-feather'\nimport DataTable from 'react-data-table-component'\n\n// ** Reactstrap Imports\nimport { Card, CardHeader, CardTitle, Input, Label, Row, Col } from 'reactstrap'\n\nconst DataTableServerSide = () => {\n  // ** Store Vars\n  const dispatch = useDispatch()\n  const store = useSelector(state => state.dataTables)\n\n  // ** States\n  const [currentPage, setCurrentPage] = useState(1)\n  const [rowsPerPage, setRowsPerPage] = useState(7)\n  const [searchValue, setSearchValue] = useState('')\n\n  // ** Get data on mount\n  useEffect(() => {\n    dispatch(\n      getData({\n        page: currentPage,\n        perPage: rowsPerPage,\n        q: searchValue\n      })\n    )\n  }, [dispatch])\n\n  // ** Function to handle filter\n  const handleFilter = e => {\n    setSearchValue(e.target.value)\n\n    dispatch(\n      getData({\n        page: currentPage,\n        perPage: rowsPerPage,\n        q: e.target.value\n      })\n    )\n  }\n\n  // ** Function to handle Pagination and get data\n  const handlePagination = page => {\n    dispatch(\n      getData({\n        page: page.selected + 1,\n        perPage: rowsPerPage,\n        q: searchValue\n      })\n    )\n    setCurrentPage(page.selected + 1)\n  }\n\n  // ** Function to handle per page\n  const handlePerPage = e => {\n    dispatch(\n      getData({\n        page: currentPage,\n        perPage: parseInt(e.target.value),\n        q: searchValue\n      })\n    )\n    setRowsPerPage(parseInt(e.target.value))\n  }\n\n  // ** Custom Pagination\n  const CustomPagination = () => {\n    const count = Math.ceil(store.total / rowsPerPage)\n\n    return (\n      <ReactPaginate\n        previousLabel={''}\n        nextLabel={''}\n        breakLabel='...'\n        pageCount={Math.ceil(count) || 1}\n        marginPagesDisplayed={2}\n        pageRangeDisplayed={2}\n        activeClassName='active'\n        forcePage={currentPage !== 0 ? currentPage - 1 : 0}\n        onPageChange={page => handlePagination(page)}\n        activeClassName='active'\n        pageClassName='page-item'\n        breakClassName='page-item'\n        nextLinkClassName='page-link'\n        pageLinkClassName='page-link'\n        breakLinkClassName='page-link'\n        previousLinkClassName='page-link'\n        nextClassName='page-item next-item'\n        previousClassName='page-item prev-item'\n        containerClassName={\n          'pagination react-paginate separated-pagination pagination-sm justify-content-end pe-1 mt-1'\n        }\n      />\n    )\n  }\n\n  // ** Table data to render\n  const dataToRender = () => {\n    const filters = {\n      q: searchValue\n    }\n\n    const isFiltered = Object.keys(filters).some(function (k) {\n      return filters[k].length > 0\n    })\n\n    if (store.data.length > 0) {\n      return store.data\n    } else if (store.data.length === 0 && isFiltered) {\n      return []\n    } else {\n      return store.allData.slice(0, rowsPerPage)\n    }\n  }\n\n  return (\n    <Fragment>\n      <Card>\n        <CardHeader className='border-bottom'>\n          <CardTitle tag='h4'>Server Side</CardTitle>\n        </CardHeader>\n        <Row className='mx-0 mt-1 mb-50'>\n          <Col sm='6'>\n            <div className='d-flex align-items-center'>\n              <Label for='sort-select'>show</Label>\n              <Input\n                className='dataTable-select'\n                type='select'\n                id='sort-select'\n                value={rowsPerPage}\n                onChange={e => handlePerPage(e)}\n              >\n                <option value={7}>7</option>\n                <option value={10}>10</option>\n                <option value={25}>25</option>\n                <option value={50}>50</option>\n                <option value={75}>75</option>\n                <option value={100}>100</option>\n              </Input>\n              <Label for='sort-select'>entries</Label>\n            </div>\n          </Col>\n          <Col className='d-flex align-items-center justify-content-sm-end mt-sm-0 mt-1' sm='6'>\n            <Label className='me-1' for='search-input'>\n              Search\n            </Label>\n            <Input\n              className='dataTable-filter'\n              type='text'\n              bsSize='sm'\n              id='search-input'\n              value={searchValue}\n              onChange={handleFilter}\n            />\n          </Col>\n        </Row>\n        <div className='react-dataTable'>\n          <DataTable\n            noHeader\n            pagination\n            paginationServer\n            className='react-dataTable'\n            columns={serverSideColumns}\n            sortIcon={<ChevronDown size={10} />}\n            paginationComponent={CustomPagination}\n            data={dataToRender()}\n          />\n        </div>\n      </Card>\n    </Fragment>\n  )\n}\n\nexport default memo(DataTableServerSide)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}